!function t(e,n,o){function r(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return r(n?n:t)},c,c.exports,t,e,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(t,e,n){"use strict";var o,r,i;t("components/radioShim/radioShim"),t("app/action/app"),t("app/break/app"),t("app/config/app"),t("app/finished/app"),t("app/note/app"),t("app/tasks/app"),t("app/timer/app"),o=t("app/base/module"),r=t("components/settings/settings"),i=new Marionette.Application({channelName:"app"}),i.module("app",o),i.on({start:function(){return Backbone.history.start()}}),r.initialize().then(function(){return i.start()})},{"app/action/app":2,"app/base/module":8,"app/break/app":10,"app/config/app":14,"app/finished/app":18,"app/note/app":22,"app/tasks/app":26,"app/timer/app":37,"components/radioShim/radioShim":48,"components/settings/settings":50}],2:[function(t,e,n){"use strict";var o,r,i;r=t("./show/controller"),i=Backbone.Radio.channel("app"),o={showAction:function(){return i.command("startSubApp",r)}},i.comply({routeToShowAction:function(){return o.showAction(),Backbone.history.navigate("ShowAction")}})},{"./show/controller":3}],3:[function(t,e,n){"use strict";var o,r,i,s,a,u,l=function(t,e){function n(){this.constructor=t}for(var o in e)c.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;r=t("./view"),i=t("utils/cache"),s=t("utils/storage"),a=Backbone.Radio.channel("app"),u=Backbone.Radio.channel("hotkeys"),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.initialize=function(){var t,e,n;return n=i.get(["currentBoard","currentListConfig"]),t=n.currentBoard,this.currentListConfig=n.currentListConfig,e=t.get("lists"),this._showView(e),this._setUpListeners()},e.prototype.onActionSelected=function(t,e){var n,o;return e=e||t.view.ui.select.val(),o=i.get("task"),"add-note"===e||"void-pomodoro"===e?(n="add-note"===e?"ShowAction":"ShowBreak","void-pomodoro"===e&&o.onTaskVoided(!0),a.command("routeToCreateNote",o,n)):("continue"!==e&&("new-task"!==e&&this._completeAndMoveTask(e),i.remove("task")),a.command("routeToShowBreak"))},e.prototype.openInTrello=function(){return window.open("https://trello.com/b/"+i.get("currentBoardConfig").id)},e.prototype._completeAndMoveTask=function(t){var e;return e=i.get("task"),e.onTaskFinished(),e.moveToList(t),this.currentListConfig.doneList=t,s.set("trelloConfig",i.get("trelloConfig"))},e.prototype._setUpListeners=function(){var t;if(this.listenTo(this.view,{"select:selected":this.onActionSelected}),this.listenTo(u,{contTask:function(){return this.onActionSelected(null,"continue")},addNote:function(){return this.onActionSelected(null,"add-note")},openInTrello:this.openInTrello}),t=this.currentListConfig.doneList)return this.listenTo(u,"moveTask",function(){return this.onActionSelected(null,t)})},e.prototype._showView=function(t){return this.view=new r({lists:t}),a.command("showView","main",this.view)},e}(Marionette.Object),e.exports=o},{"./view":5,"utils/cache":63,"utils/storage":66}],4:[function(t,e,n){var o=t("hbsfy/runtime");e.exports=o.template({1:function(t,e,n,o){var r,i=e.helperMissing,s="function",a=this.escapeExpression;return'\t\t\t\t<option value="'+a((r=null!=(r=e.id||(null!=t?t.id:t))?r:i,typeof r===s?r.call(t,{name:"id",hash:{},data:o}):r))+'">'+a((r=null!=(r=e.name||(null!=t?t.name:t))?r:i,typeof r===s?r.call(t,{name:"name",hash:{},data:o}):r))+"</option>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,o){var r,i;return'<h1 class="main__header">Task: '+this.escapeExpression((i=null!=(i=e.task||(null!=t?t.task:t))?i:e.helperMissing,"function"==typeof i?i.call(t,{name:"task",hash:{},data:o}):i))+'</h1>\n<div class="main__text">\n\t<label for="select" class="select__label">Time\'s up! How\'d you do?</label>\n\t<select id="select" class="select__dropdown">\n\t\t<option value="">Time\'s up! How\'d you do?</option>\n\t\t<optgroup label="I\'m not done">\n\t\t\t<option value="continue">Continue task after break</option>\n\t\t\t<option value="new-task">Start new task after break</option>\n\t\t</optgroup>\n\t\t<optgroup label="All done! Move task to">\n'+(null!=(r=e.each.call(t,null!=t?t.lists:t,{name:"each",hash:{},fn:this.program(1,o,0),inverse:this.noop,data:o}))?r:"")+'\t\t</optgroup>\n\t\t<optgroup label="Not good">\n\t\t\t<option value="void-pomodoro">Void Pomodoro</option>\n\t\t</optgroup>\n\t\t<optgroup label="Wait! Let me make a note">\n\t\t\t<option value="add-note">Add note</option>\n\t\t</optgroup>\n\t</select>\n</div>'},useData:!0})},{"hbsfy/runtime":76}],5:[function(t,e,n){"use strict";var o,r,i,s,a,u=function(t,e){function n(){this.constructor=t}for(var o in e)l.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;r=t("utils/cache"),i=t("./templates/item.hbs"),s=t("behaviors/select"),a=Backbone.Radio.channel("hotkeys"),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.template=i,e.prototype.templateHelpers=function(){return{task:r.get("task").title}},e.prototype.behaviors={Select:{behaviorClass:s}},e.prototype.ui={select:"#select",contOption:"option[value=continue]"},e.prototype.onBeforeShow=function(){var t,e,n,o;if(e=a.request("get","contTask"),null!=e&&this._appendText(this.ui.contOption," ("+e+")"),t=a.request("get","addNote"),null!=t&&this._appendText(this.ui.select.find("option[value=add-note]")," ("+t+")"),(n=r.get("currentListConfig").doneList)&&(o=a.request("get","moveTask"),null!=o))return this._appendText(this.ui.select.find("option[value="+n+"]")," ("+o+")")},e.prototype.initialize=function(t){var e;return e=r.get("task"),this.listenTo(e,"change:name",this.render)},e.prototype.serializeData=function(){return this.options},e.prototype._appendText=function(t,e){return t.text(t.text()+e)},e}(Marionette.ItemView),e.exports=o},{"./templates/item.hbs":4,"behaviors/select":42,"utils/cache":63}],6:[function(t,e,n){"use strict";var o,r,i,s,a,u,l,c,d,p,h,f,m,v,y,g,w,k=function(t,e){return function(){return t.apply(e,arguments)}},x=function(t,e){function n(){this.constructor=t}for(var o in e)b.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},b={}.hasOwnProperty;r=t("components/backgroundChannel/backgroundChannel"),i=t("components/base/controller"),s=t("./layout"),a=t("utils/cache"),u=t("components/hotkeys/hotkeys"),l=t("utils/notifications"),c=t("utils/storage"),d=t("entities/trello/api"),p=t("entities/trello/boards"),h=t("entities/trello/lists"),f=t("utils/window"),m=Backbone.Radio.channel("app"),v=Backbone.Radio.channel("background"),y=Backbone.Radio.channel("entities"),g=Backbone.Radio.channel("hotkeys"),w=Backbone.Radio.channel("settings"),o=function(t){function e(){return this._applyWindowSettings=k(this._applyWindowSettings,this),e.__super__.constructor.apply(this,arguments)}return x(e,t),e.prototype.initialize=function(){return this._showLayout(),this._setUpListeners(),this.initializeApp(),this._setAppMode("default"),this._applyWindowSettings(),this._showStandaloneNotification()},e.prototype.initializeApp=function(){return c.get("trelloConfig,trelloToken").then(function(t){return function(e){var n,o;return n=e.trelloConfig,o=e.trelloToken,null==o||t._validTrelloConfig(n)===!1?m.command("routeToShowConfig",{token:null!=o}):(a.set("trelloConfig",n),t._setUpEntities(o).then(function(){return m.command("routeToListTasks")}))}}(this))},e.prototype.onMenuAction=function(){var t;switch(t=$(event.target).attr("data-action")){case"home":g.trigger("routeHome");break;case"sync":y.command("syncTasks");break;case"dashboard":this._openDashboard();break;case"create-task":this._routeToCreateTask()}return this.view.triggerMethod("toggleMenu")},e.prototype.onTrelloConfigChanged=function(t){return a.set("trelloConfig",t)},e.prototype.onTrelloTokenChanged=function(t){if(null==t)return a.remove(["tasks","task"]),c.remove("trelloConfig"),m.command("destroyTimer"),this._setAppMode("default"),m.command("routeToShowConfig",{token:!1})},e.prototype.openSettingsPage=function(){return this._openDashboard("settings")},e.prototype._openDashboard=function(t){return null==t&&(t=""),f.create("dashboard","dashboard.html#/"+t,800,560)},e.prototype._routeToCreateTask=function(){var t;return t=this._getCurrentRoute(),"ListTasks"!==t&&"ShowTask"!==t&&"ShowAction"!==t&&"ShowBreak"!==t?l.create("routeToCreateTask",{message:"Please complete your current action first"}):m.command("routeToCreateTask",{redirect:t})},e.prototype._setAppMode=function(t){return null==t&&(t="default"),this.view.$el.attr("data-mode",t)},e.prototype._getCurrentRoute=function(){return Backbone.history.getFragment()},e.prototype._getCurrentUser=function(){return this.currentUser},e.prototype._applyWindowSettings=function(){var t,e;return t=f.get("app"),t.setAlwaysOnTop(w.request("get","alwaysOnTop")),e=w.request("get","snapEdges")===!0?"addListener":"removeListener",t.onBoundsChanged[e](this._snapToScreenEdge)},e.prototype._snapToScreenEdge=_.debounce(function(){var t,e,n;if(t=f.get("app"),t.isMaximized()!==!0)return e=t.innerBounds,n=10,e.left<n?e.left=0:screen.availWidth-(e.left+e.width)<n&&(e.left=screen.availWidth-e.width),screen.availHeight-(e.top+e.height)<n?e.top=screen.availHeight-e.height:void 0},200),e.prototype._showStandaloneNotification=function(){var t;if(t=w.request("get","showStandaloneNotification"),t!==!1)return chrome.notifications.create("standaloneNotifications",{type:"basic",title:chrome.i18n.getMessage("appName"),message:"There is now a standalone Pomello app with tons of new features!",buttons:[{title:"Get the new version!"}],iconUrl:"images/icon-notification.png"},function(t){return setTimeout(function(){return chrome.notifications.clear(t),chrome.notifications.onButtonClicked.removeListener()},1e4)}),chrome.notifications.onButtonClicked.addListener(function(t,e){if(chrome.notifications.onButtonClicked.removeListener(),"standaloneNotifications"===t&&0===e)return window.open("http://www.pomelloapp.com/download")})},e.prototype._setUpListeners=function(){return this.listenTo(this.view,{menuAction:this.onMenuAction}),this.listenTo(m,{timerEnded:this._setAppMode}),this.listenTo(v,{"storage:trelloConfig:changed":this.onTrelloConfigChanged,"storage:trelloToken:changed":this.onTrelloTokenChanged,"storage:settings:changed":this._applyWindowSettings}),this.listenTo(g,{routeSettings:function(){return this._openDashboard("settings")},routeProductivity:function(){return this._openDashboard("productivity")},routeHome:function(){return m.command("destroyTimer routeToListTasks setMode")},syncTrello:function(){return y.command("syncTasks")},createTask:this._routeToCreateTask},this),m.comply({setMode:this._setAppMode,initializeApp:this.initializeApp},this),m.reply({currentRoute:this._getCurrentRoute,currentUser:this._getCurrentUser},this)},e.prototype._setUpEntities=function(t){return new Promise(function(e){return function(n,o){return e._setUpTrello(t).then(function(t){return y.command("initBoardsCollection initListsCollection",t),y.request("setCurrentBoard").then(function(){return y.request("setCurrentList").then(n)})["catch"](function(t){var e;if("Couldnt find current board"===t)return e=a.get("trelloConfig"),delete e.currentBoard,c.set("trelloConfig",e)})})}}(this))},e.prototype._setUpTrello=function(t){return new Promise(function(e){return function(n,o){var r;return r=new d,r.setToken(t),r.ajax({url:"/members/me",params:{fields:"none",boards:"open",board_lists:"open",board_fields:"name,prefs"}}).done(function(t){return e.currentUser={id:t.id},n(t.boards)})}}(this))},e.prototype._validTrelloConfig=function(t){return null!=t&&null!=t.boards&&(!!t.boards.length&&!(null==t.boards[0].lists||!t.boards[0].lists.length))},e.prototype._showLayout=function(){return this.view=new s,this.view.render()},e}(i),e.exports=o},{"./layout":7,"components/backgroundChannel/backgroundChannel":44,"components/base/controller":45,"components/hotkeys/hotkeys":47,"entities/trello/api":54,"entities/trello/boards":56,"entities/trello/lists":59,"utils/cache":63,"utils/notifications":65,"utils/storage":66,"utils/window":67}],7:[function(t,e,n){"use strict";var o,r,i,s=function(t,e){function n(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;r=t("./templates/layout"),i=Backbone.Radio.channel("hotkeys"),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.el="#app",e.prototype.template=r,e.prototype.regions={menuRegion:".menu",mainRegion:".main__region",timerRegion:".timer__region"},e.prototype.ui={menuBtn:".menu__btn",toggleMenuBtn:".toggle-menu-btn"},e.prototype.triggers={"click @ui.menuBtn":"menuAction"},e.prototype.events={"click @ui.toggleMenuBtn":"onToggleMenu"},e.prototype.initialize=function(){return this._setUpListeners()},e.prototype.onShowView=function(t,e){return this[t+"Region"].show(e)},e.prototype.onEmptyRegion=function(t){return this[t+"Region"].empty()},e.prototype.onToggleMenu=function(){return this.$el.toggleClass("menu-active")},e.prototype._setUpListeners=function(){return this.listenTo(i,{toggleMenu:this.onToggleMenu})},e}(Marionette.LayoutView),e.exports=o},{"./templates/layout":9}],8:[function(t,e,n){"use strict";var o,r,i=function(t,e){function n(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t("./controller"),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.regionId="app",e.prototype.onStart=function(){return this._createContainer(),this._startMediator()},e.prototype._createContainer=function(){var t;return t=document.createElement("div"),t.id=this.regionId,document.body.appendChild(t)},e.prototype._startMediator=function(){return this.controller=new o({app:this.app})},e}(Marionette.Module),e.exports=r},{"./controller":6}],9:[function(t,e,n){var o=t("hbsfy/runtime");e.exports=o.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,o){return'<section class="menu">\n\t<ul class="menu__btns">\n\t\t<li class="menu__btn" data-action="home" title="Return to main menu"></li>\n\t\t<li class="menu__btn" data-action="sync" title="Sync tasks with Trello"></li>\n\t\t<li class="menu__btn" data-action="dashboard" title="Open dashboard"></li>\n\t\t<li class="menu__btn" data-action="create-task" title="Create a new task"></li>\n\t</ul>\n</section>\n<section class="main__region">\n\t<div class="connecting__overlay"></div>\n\t<span class="connecting">Connecting to Trello...</span>\n</section>\n<section class="timer__region"></section>\n<button class="toggle-menu-btn" tabindex="-1"></button>'},useData:!0})},{"hbsfy/runtime":76}],10:[function(t,e,n){"use strict";var o,r,i;r=t("./show/controller"),i=Backbone.Radio.channel("app"),o={showBreak:function(t){return i.command("startSubApp",r,t)}},i.comply({routeToShowBreak:function(t){return o.showBreak.apply(null,arguments),Backbone.history.navigate("ShowBreak")}})},{"./show/controller":11}],11:[function(t,e,n){"use strict";var o,r,i,s,a,u,l,c=function(t,e){function n(){this.constructor=t}for(var o in e)d.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;r=t("./view"),i=t("utils/cache"),s=Backbone.Radio.channel("app"),a=Backbone.Radio.channel("entities"),u=Backbone.Radio.channel("hotkeys"),l=Backbone.Radio.channel("settings"),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.initialize=function(t){if(null==t&&(t={}),this.breakType=this._getBreakType(),this._showView(),this._showTimer(),this._setUpListeners(),t.auto!==!1)return this._setAppMode()},e.prototype.onTimerStarted=function(){return this._setAppMode()},e.prototype.onTimerEnded=function(){var t;return t=i.has("task")?"routeToShowTask":"routeToListTasks",s.command(t)},e.prototype.openInTrello=function(){var t,e,n,o;return e=i.get(["task","currentBoard"]),n=e.task,t=e.currentBoard,o="https://trello.com/",o+=null!=n?"c/"+n.id:"b/"+t.id,window.open(o)},e.prototype._getBreakType=function(){return i.get("pomodori")%4===0?"long-break":"short-break"},e.prototype._setAppMode=function(){return s.command("setMode",this.breakType)},e.prototype._setUpListeners=function(){return this.listenTo(s,{timerStarted:this.onTimerStarted,timerEnded:this.onTimerEnded}),this.listenTo(u,{openInTrello:this.openInTrello})},e.prototype._showTimer=function(){return s.command("showTimer",{time:l.request("get","short-break"===this.breakType?"shortBreakTime":"longBreakTime"),auto:null==this.options.auto||this.options.auto})},e.prototype._showView=function(){return this.view=new r({breakType:this.breakType}),s.command("showView","main",this.view)},e}(Marionette.Object),e.exports=o},{"./view":13,"utils/cache":63}],12:[function(t,e,n){var o=t("hbsfy/runtime");e.exports=o.template({1:function(t,e,n,o){var r;return this.escapeExpression((r=null!=(r=e.header||(null!=t?t.header:t))?r:e.helperMissing,"function"==typeof r?r.call(t,{name:"header",hash:{},data:o}):r))},3:function(t,e,n,o){return"New task"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,o){var r,i;return'<h1 class="main__header">Next: '+(null!=(r=e["if"].call(t,null!=t?t.header:t,{name:"if",hash:{},fn:this.program(1,o,0),inverse:this.program(3,o,0),data:o}))?r:"")+'</h1>\n<div class="main__text">Take a '+this.escapeExpression((i=null!=(i=e.breakType||(null!=t?t.breakType:t))?i:e.helperMissing,"function"==typeof i?i.call(t,{name:"breakType",hash:{},data:o}):i))+" break</div>"},useData:!0})},{"hbsfy/runtime":76}],13:[function(t,e,n){"use strict";var o,r,i,s=function(t,e){function n(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;r=t("utils/cache"),i=t("./templates/item.hbs"),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.template=i,e.prototype.serializeData=function(){return{header:!!r.has("task")&&r.get("task").title,breakType:this.options.breakType.replace("-break","")}},e}(Marionette.ItemView),e.exports=o},{"./templates/item.hbs":12,"utils/cache":63}],14:[function(t,e,n){"use strict";var o,r,i;r=t("./show/controller"),i=Backbone.Radio.channel("app"),o={showConfig:function(t){return i.command("startSubApp",r,t)}},i.comply({routeToShowConfig:function(){return o.showConfig.apply(null,arguments),Backbone.history.navigate("ShowConfig")}})},{"./show/controller":15}],15:[function(t,e,n){"use strict";var o,r,i,s,a,u,l,c,d,p=function(t,e){function n(){this.constructor=t}for(var o in e)h.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},h={}.hasOwnProperty;o=t("utils/cache"),i=t("./view"),s=t("utils/storage"),a=t("entities/trello/api"),u=t("utils/window"),l=Backbone.Radio.channel("app"),c=Backbone.Radio.channel("background"),d=Backbone.Radio.channel("entities"),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.boardsAndListsInited=!1,e.prototype.currentBoardAndListInited=!1,e.prototype.initialize=function(t){return l.command("setMode","default"),this._showView(t),this._setUpListeners()},e.prototype.openDashboard=function(){return u.create("dashboard","dashboard.html#trello")},e.prototype.onTrelloStorageChanged=function(t){switch(typeof t){case"string":this._showView({token:!0});break;case"undefined":this._showView({token:!1})}return l.command("initializeApp")},e.prototype._setUpListeners=function(){return this.listenTo(this.view,{openDashboardBtnClicked:this.openDashboard}),this.listenTo(c,{"storage:trelloToken:changed storage:trelloConfig:changed":this.onTrelloStorageChanged})},e.prototype._showView=function(t){return this.view=new i(t),l.command("showView","main",this.view)},e}(Marionette.Object),e.exports=r},{"./view":17,"entities/trello/api":54,"utils/cache":63,"utils/storage":66,"utils/window":67}],16:[function(t,e,n){var o=t("hbsfy/runtime");e.exports=o.template({1:function(t,e,n,o){return"\t\tClick here to set up Pomello\n"},3:function(t,e,n,o){return"\t\tSelect at least one list\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,o){var r;return'<a href="#" class="js-open-dash">\n'+(null!=(r=e.unless.call(t,null!=t?t.token:t,{name:"unless",hash:{},fn:this.program(1,o,0),inverse:this.program(3,o,0),data:o}))?r:"")+"</a>"},useData:!0})},{"hbsfy/runtime":76}],17:[function(t,e,n){"use strict";var o,r,i=function(t,e){function n(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;r=t("./templates/item"),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.template=r,e.prototype.ui={openDashBtn:".js-open-dash"},e.prototype.triggers={"click @ui.openDashBtn":"openDashboardBtnClicked"},e.prototype.serializeData=function(){return this.options},e}(Marionette.ItemView),e.exports=o},{"./templates/item":16}],18:[function(t,e,n){"use strict";var o,r,i;r=t("./show/controller"),i=Backbone.Radio.channel("app"),o={showFinished:function(t){return i.command("startSubApp",r,{task:t})}},i.comply({routeToShowFinished:function(){return o.showFinished.apply(null,arguments),Backbone.history.navigate("ShowFinished")}})},{"./show/controller":19}],19:[function(t,e,n){"use strict";var o,r,i,s,a,u,l=function(t,e){function n(){this.constructor=t}for(var o in e)c.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;o=t("utils/cache"),i=t("./view"),s=t("utils/storage"),a=Backbone.Radio.channel("app"),u=Backbone.Radio.channel("hotkeys"),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.initialize=function(t){var e,n,r;return r=o.get(["task","currentBoard","currentListConfig"]),this.task=r.task,e=r.currentBoard,this.currentListConfig=r.currentListConfig,null!=t.task&&(this.task=t.task),n=e.get("lists"),this._showView(this.task,n),this._setUpListeners(),o.remove("task")},e.prototype.onListSelected=function(t,e){return e=e||t.view.ui.select.val(),"add-note"===e?this.onAddNote():(this.currentListConfig.doneList=e,s.set("trelloConfig",o.get("trelloConfig")),this.task.moveToList(e),a.command("routeToListTasks"))},e.prototype.onAddNote=function(){var t;return t=this.task,a.command("routeToCreateNote",t,function(){return a.command("routeToShowFinished",t)})},e.prototype.openInTrello=function(){return window.open("https://trello.com/b/"+o.get("currentBoardConfig").id)},e.prototype._setUpListeners=function(){var t;if(this.listenTo(this.view,{"select:selected":this.onListSelected}),this.listenTo(u,{addNote:this.onAddNote,openInTrello:this.openInTrello}),t=this.currentListConfig.doneList)return this.listenTo(u,"moveTask",function(){return this.onListSelected(null,t)})},e.prototype._showView=function(t,e){return this.view=new i({task:t,lists:e}),a.command("showView","main",this.view)},e}(Marionette.Object),e.exports=r},{"./view":21,"utils/cache":63,"utils/storage":66}],20:[function(t,e,n){var o=t("hbsfy/runtime");e.exports=o.template({1:function(t,e,n,o){var r,i=e.helperMissing,s="function",a=this.escapeExpression;return'\t\t\t\t<option value="'+a((r=null!=(r=e.id||(null!=t?t.id:t))?r:i,typeof r===s?r.call(t,{name:"id",hash:{},data:o}):r))+'">'+a((r=null!=(r=e.name||(null!=t?t.name:t))?r:i,typeof r===s?r.call(t,{name:"name",hash:{},data:o}):r))+"</option>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,o){var r,i;return'<h1 class="main__header">Task: '+this.escapeExpression((i=null!=(i=e.task||(null!=t?t.task:t))?i:e.helperMissing,"function"==typeof i?i.call(t,{name:"task",hash:{},data:o}):i))+'</h1>\n<div class="main__text">\n\t<label for="select" class="select__label">Nice! Move task to...</label>\n\t<select id="select" class="select__dropdown">\n\t\t<option value="">Nice! Move task to...</option>\n\t\t<optgroup label="Pick a list">\n'+(null!=(r=e.each.call(t,null!=t?t.lists:t,{name:"each",hash:{},fn:this.program(1,o,0),inverse:this.noop,data:o}))?r:"")+'\t\t</optgroup>\n\t\t<optgroup label="Wait! Let me make a note">\n\t\t\t<option value="add-note">Add note</option>\n\t\t</optgroup>\n\t</select>\n</div>'},useData:!0})},{"hbsfy/runtime":76}],21:[function(t,e,n){"use strict";var o,r,i,s,a,u=function(t,e){function n(){this.constructor=t}for(var o in e)l.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;o=t("utils/cache"),i=t("./templates/item.hbs"),s=t("behaviors/select"),a=Backbone.Radio.channel("hotkeys"),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.template=i,e.prototype.behaviors={Select:{behaviorClass:s}},e.prototype.ui={select:"#select"},e.prototype.onBeforeShow=function(){var t,e,n;if(t=a.request("get","addNote"),null!=t&&this._appendText(this.ui.select.find("option[value=add-note]")," ("+t+")"),(e=o.get("currentListConfig").doneList)&&(n=a.request("get","moveTask"),null!=n))return this._appendText(this.ui.select.find("option[value="+e+"]")," ("+n+")")},e.prototype.serializeData=function(){return{task:this.options.task.title,lists:this.options.lists}},e.prototype._appendText=function(t,e){return t.text(t.text()+e)},e}(Marionette.ItemView),e.exports=r},{"./templates/item.hbs":20,"behaviors/select":42,"utils/cache":63}],22:[function(t,e,n){"use strict";var o,r,i;r=t("./create/controller"),i=Backbone.Radio.channel("app"),o={createNote:function(t,e,n){return i.command("startSubApp",r,{task:t,redirect:e,type:n})}},i.comply({routeToCreateNote:function(){return o.createNote.apply(null,arguments),Backbone.history.navigate("CreateNote")}})},{"./create/controller":23}],23:[function(t,e,n){"use strict";var o,r,i,s,a,u=function(t,e){function n(){this.constructor=t}for(var o in e)l.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;r=t("./view"),i=t("utils/notifications"),s=Backbone.Radio.channel("app"),a=Backbone.Radio.channel("hotkeys"),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.initialize=function(t){return this._showView(t.type),this.type=t.type||"general",this._setUpListeners()},e.prototype.onSubmit=function(t){return"/?"===t?(window.open("http://www.tinynudge.co/pomello/help/#adding-notes"),this.view.ui.input.val("")):(("general"!==this.type||t.length&&"general"===this.type)&&this.options.task.onNoteAdded(this.type,t),this.redirect())},e.prototype.onInputBlur=function(){var t;if(t=function(){switch(this.view.ui.input.val()){case"n":return"general";case"'":return"internal";case"-":return"external";default:return!1}}.call(this),t!==!1)return this.switchType(t)},e.prototype.onTimerEnded=function(){if("ShowTask"===this.options.redirect)return this.options.task.onTimerEnded(),this.options.redirect="ShowAction"},e.prototype.switchType=function(t){return this.type=this.view.options.type=t,this.view.render()},e.prototype.redirect=function(){var t;return t=this.options.redirect,"string"==typeof t?s.command("routeTo"+t):t()},e.prototype._setUpListeners=function(){return this.listenTo(this.view,{inputBlur:this.onInputBlur,submit:this.onSubmit,goBack:this.redirect}),this.listenTo(s,{timerEnded:this.onTimerEnded}),this.listenTo(a,{addNote:function(t){return function(){return t.switchType("general")}}(this),internalDistraction:function(t){return function(){return t.switchType("internal")}}(this),externalDistraction:function(t){return function(){return t.switchType("external")}}(this)})},e.prototype._showView=function(t){return this.view=new r({type:t}),s.command("showView","main",this.view)},e}(Marionette.Object),e.exports=o},{"./view":25,"utils/notifications":65}],24:[function(t,e,n){var o=t("hbsfy/runtime");e.exports=o.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,o){var r;return'<h1 class="main__header">'+this.escapeExpression((r=null!=(r=e.noteType||(null!=t?t.noteType:t))?r:e.helperMissing,"function"==typeof r?r.call(t,{name:"noteType",hash:{},data:o}):r))+'</h1>\n<div class="main__text">\n\t<input type="text" class="main-input" placeholder="Enter /? for help">\n</div>'},useData:!0})},{"hbsfy/runtime":76}],25:[function(t,e,n){"use strict";var o,r,i,s=function(t,e){function n(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;r=t("./templates/item.hbs"),o=t("behaviors/input"),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.template=r,e.prototype.templateHelpers=function(){return{noteType:function(t){return function(){switch(t.options.type){case"internal":return"Internal distraction";case"external":return"External distraction";default:return"Add note"}}}(this)}},e.prototype.behaviors={Input:{behaviorClass:o}},e.prototype.ui={input:".main-input"},e.prototype.triggers={"blur @ui.input":"inputBlur"},e.prototype.serializeData=function(){return this.options},e}(Marionette.ItemView),e.exports=i},{"./templates/item.hbs":24,"behaviors/input":41}],26:[function(t,e,n){"use strict";var o,r,i,s,a;i=t("./list/controller"),s=t("./show/controller"),r=t("./create/controller"),a=Backbone.Radio.channel("app"),o={listTasks:function(){return a.command("startSubApp",i)},showTask:function(t){return a.command("startSubApp",s,{task:t})},createTask:function(t){return a.command("startSubApp",r,t)}},a.comply({routeToListTasks:function(){return o.listTasks(),Backbone.history.navigate("ListTasks")},routeToShowTask:function(t){return o.showTask.apply(null,arguments),Backbone.history.navigate("ShowTask")},routeToCreateTask:function(t){return o.createTask.apply(null,arguments),Backbone.history.navigate("CreateTask")}})},{"./create/controller":27,"./list/controller":30,"./show/controller":34}],27:[function(t,e,n){"use strict";var o,r,i,s,a,u,l=function(t,e){function n(){this.constructor=t}for(var o in e)c.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;o=t("utils/cache"),r=t("utils/notifications"),i=t("entities/trello/task"),a=t("./view"),u=Backbone.Radio.channel("app"),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.initialize=function(t){return this.list=o.get("currentList"),this._showView({board:this.list.get("nameBoard"),list:this.list.get("name")}),this._setUpListeners()},e.prototype.previewTask=function(){var t,e,n,o;if(t=this.view.ui.input,n=t.val(),n.length)return o=this._parseInput(n),null!=o.list&&(e=this.validateList(o.list))!==!1&&this.view.updateHeader(e.get("nameBoard"),e.get("name")),e!==!1&&r.create("taskPreview",{type:"list",title:"New task preview",message:"",items:this._buildListItems(o),contextMessage:"Press Enter to create task"},1e4),t.focus()},e.prototype.createTask=function(){var t,e,n;return t=this.view.ui.input,e=t.val(),"/?"===e?(t.val(""),window.open("http://www.tinynudge.co/pomello/help/#creating-tasks")):(n=this._parseInput(e),null==n.list||this.validateList(n.list)!==!1?null!=n.title&&n.title.length?(this.saveTask(n),this.redirect()):r.create("createTaskError",{title:"Task title required",message:"Please enter a task title"}):void 0)},e.prototype.redirect=function(){return u.command("routeTo"+this.options.redirect)},e.prototype.saveTask=function(t){
return(new i).save({name:t.title,desc:t.desc||"",idList:this.list.id,labels:null!=t.labels?t.labels.join(","):"",pos:"top"}).done(function(e){return function(){return r.create("taskSaved",{type:"list",title:"Task successfully created",message:"",items:e._buildListItems(t)})}}(this))},e.prototype.validateList=function(t){var e,n,r,i,s;return e=t.split("/"),n=1===e.length?o.get("currentBoard"):this._searchCollection(e[0],o.get("boards"),"board"),i=e[1===e.length?0:1],n!==!1&&(s=o.get("lists").filter(function(t){return t.get("idBoard")===n.id}),r=this._searchCollection(i,s,"list"),r!==!1&&(this.list=r))},e.prototype.onTimerEnded=function(){return"ShowTask"===this.options.redirect?(o.get("task").onTimerEnded(),this.options.redirect="ShowAction"):"ShowBreak"===this.options.redirect?this.options.redirect=o.has("task")?"ShowTask":"ListTasks":void 0},e.prototype._buildListItems=function(t){var e;return e=[{title:"Board - ",message:this.list.get("nameBoard")},{title:"List - ",message:this.list.get("name")}],null!=t.title&&e.push({title:"Title - ",message:t.title}),null!=t.desc&&e.push({title:"Description - ",message:t.desc}),null!=t.labels&&e.push({title:"Labels - ",message:t.labels.join(", ")}),e},e.prototype._searchCollection=function(t,e,n){var o,r;return o=new RegExp(t.split("").join(".*"),"i"),r=e.filter(function(t){return o.test(t.get("name"))}),1!==r.length?(this._notifyError(t,r,n),!1):r[0]},e.prototype._notifyError=function(t,e,n){var o;return o={},0===e.length?(o.title="No "+n+"s found",o.message="Couldn't find any "+n+'s matching "'+t+'"'):(o.title="Multiple "+n+"s found",o.message=e.map(function(t){return t.get("name")}).join("\n"),o.contextMessage="Enter a more specific "+n+" name"),r.create("createTaskError",o,1e4)},e.prototype._parseInput=function(t){var e;return e=new RegExp("(?=-(?:l|list|t|title|d|desc|#|labels)\\s)"),_.object(t.split(e).map(function(t){var n,o,r,i;return e.test(t)===!1?["title",t]:(r=t.indexOf(" "),o=t.substring(1,r),i=t.substring(r+1).trim(),n=function(){switch(o){case"l":return"list";case"t":return"title";case"d":return"desc";case"#":return"labels";default:return o}}(),"labels"===n&&(i=i.split(",").map(function(t){return t.trim()})),[n,i])}))},e.prototype._setUpListeners=function(){return this.listenTo(this.view,{inputBlur:this.previewTask,submit:this.createTask,goBack:this.redirect}),this.listenTo(u,{timerEnded:this.onTimerEnded})},e.prototype._showView=function(t){return this.view=new a(t),u.command("showView","main",this.view)},e}(Marionette.Object),e.exports=s},{"./view":29,"entities/trello/task":61,"utils/cache":63,"utils/notifications":65}],28:[function(t,e,n){var o=t("hbsfy/runtime");e.exports=o.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,o){var r,i=e.helperMissing,s="function",a=this.escapeExpression;return'<h1 class="main__header">New task: <span id="js-board">'+a((r=null!=(r=e.board||(null!=t?t.board:t))?r:i,typeof r===s?r.call(t,{name:"board",hash:{},data:o}):r))+'</span>: <span id="js-list">'+a((r=null!=(r=e.list||(null!=t?t.list:t))?r:i,typeof r===s?r.call(t,{name:"list",hash:{},data:o}):r))+'</span></h1>\n<div class="main__text">\n\t<input type="text" class="main-input" placeholder="Enter /? for help">\n</div>'},useData:!0})},{"hbsfy/runtime":76}],29:[function(t,e,n){"use strict";var o,r,i,s,a=function(t,e){function n(){this.constructor=t}for(var o in e)u.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;o=t("utils/cache"),i=t("./templates/item.hbs"),r=t("behaviors/input"),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template=i,e.prototype.behaviors={Input:{behaviorClass:r}},e.prototype.ui={input:".main-input",board:"#js-board",list:"#js-list"},e.prototype.triggers={"blur @ui.input":"inputBlur"},e.prototype.updateHeader=function(t,e){return this.ui.board.text(t),this.ui.list.text(e)},e.prototype.serializeData=function(){return this.options},e}(Marionette.ItemView),e.exports=s},{"./templates/item.hbs":28,"behaviors/input":41,"utils/cache":63}],30:[function(t,e,n){"use strict";var o,r,i,s,a,u,l,c=function(t,e){function n(){this.constructor=t}for(var o in e)d.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;o=t("utils/cache"),i=t("entities/trello/tasks"),r=t("./view"),a=Backbone.Radio.channel("app"),u=Backbone.Radio.channel("entities"),l=Backbone.Radio.channel("hotkeys"),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.initialize=function(){return u.request("getTasks",{cached:!0}).then(function(t){return function(e){return t._showView(e),t._setUpListeners(),u.command("syncTasks",{silent:!0})}}(this))},e.prototype.onItemSelected=function(){var t;return t=$(event.target).val(),t.indexOf(":")!==-1?this._setBoardAndList.apply(this,t.split(":")):this.routeToShowTask(t)},e.prototype.onTimerEnded=function(){return a.command("routeToShowBreak",{auto:!1})},e.prototype.routeToShowTask=function(t){var e;return e=o.get("tasks").get(t),a.command("routeToShowTask",e)},e.prototype.openInTrello=function(){return window.open("https://trello.com/b/"+o.get("currentBoardConfig").id)},e.prototype._setBoardAndList=function(t,e){return u.request("setCurrentBoard",t).then(function(t){return function(){return u.request("setCurrentList",e)}}(this)).then(function(t){return function(){return u.request("getTasks",{list:null,cached:!1})}}(this)).then(function(t){return function(e){return t._updateCollection(e)}}(this))["catch"](function(){})},e.prototype._setAdjacentList=function(t){return u.request("setAdjacentList",t).then(function(t){return function(){return u.request("getTasks",{list:null,cached:!1})}}(this)).then(function(t){return function(e){return t._updateCollection(e)}}(this))["catch"](function(){})},e.prototype._setAdjacentBoard=function(t){return u.request("setAdjacentBoard",t).then(function(t){return function(){return u.request("setCurrentList")}}(this)).then(function(t){return function(){return u.request("getTasks",{list:null,cached:!1})}}(this)).then(function(t){return function(e){return t._updateCollection(e)}}(this))["catch"](function(){})},e.prototype._updateCollection=function(t){return this.view.collection=t,this.view.undelegateEvents().delegateEvents().render()._initialEvents()},e.prototype._setUpListeners=function(){return this.listenTo(this.view,{"select:selected":this.onItemSelected}),this.listenTo(a,{timerEnded:this.onTimerEnded}),this.listenTo(l,{nextBoard:function(t){return function(){return t._setAdjacentBoard("next")}}(this),prevBoard:function(t){return function(){return t._setAdjacentBoard("prev")}}(this),nextList:function(t){return function(){return t._setAdjacentList("next")}}(this),prevList:function(t){return function(){return t._setAdjacentList("prev")}}(this),openInTrello:this.openInTrello})},e.prototype._showView=function(t){return this.view=new r({collection:t}),a.command("showView","main",this.view)},e}(Marionette.Object),e.exports=s},{"./view":33,"entities/trello/tasks":62,"utils/cache":63}],31:[function(t,e,n){var o=t("hbsfy/runtime");e.exports=o.template({1:function(t,e,n,o){var r;return'\t\t\t<optgroup label="Switch list">\n'+(null!=(r=e.each.call(t,null!=t?t.lists:t,{name:"each",hash:{},fn:this.program(2,o,0),inverse:this.noop,data:o}))?r:"")+"\t\t\t</optgroup>\n"},2:function(t,e,n,o){var r,i=e.helperMissing,s="function",a=this.escapeExpression;return'\t\t\t\t\t<option value="'+a((r=null!=(r=e.idBoard||(null!=t?t.idBoard:t))?r:i,typeof r===s?r.call(t,{name:"idBoard",hash:{},data:o}):r))+":"+a((r=null!=(r=e.id||(null!=t?t.id:t))?r:i,typeof r===s?r.call(t,{name:"id",hash:{},data:o}):r))+'">'+a((r=null!=(r=e.nameBoard||(null!=t?t.nameBoard:t))?r:i,typeof r===s?r.call(t,{name:"nameBoard",hash:{},data:o}):r))+": "+a((r=null!=(r=e.name||(null!=t?t.name:t))?r:i,typeof r===s?r.call(t,{name:"name",hash:{},data:o}):r))+"</option>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,o){var r,i,s=e.helperMissing,a="function",u=this.escapeExpression;return'<h1 class="main__header">'+u((i=null!=(i=e.board||(null!=t?t.board:t))?i:s,typeof i===a?i.call(t,{name:"board",hash:{},data:o}):i))+": "+u((i=null!=(i=e.list||(null!=t?t.list:t))?i:s,typeof i===a?i.call(t,{name:"list",hash:{},data:o}):i))+'</h1>\n<div class="main__text">\n\t<label for="select" class="select__label">Pick a task</label>\n\t<select id="select" class="select__dropdown">\n\t\t<option value="">Pick a task</option>\n\t\t<optgroup id="js-tasks" label="Tasks"></optgroup>\n'+(null!=(r=e["if"].call(t,null!=t?t.lists:t,{name:"if",hash:{},fn:this.program(1,o,0),inverse:this.noop,data:o}))?r:"")+"\t</select>\n</div>"},useData:!0})},{"hbsfy/runtime":76}],32:[function(t,e,n){var o=t("hbsfy/runtime");e.exports=o.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,o){var r;return this.escapeExpression((r=null!=(r=e.name||(null!=t?t.name:t))?r:e.helperMissing,"function"==typeof r?r.call(t,{name:"name",hash:{},data:o}):r))},useData:!0})},{"hbsfy/runtime":76}],33:[function(t,e,n){"use strict";var o,r,i,s,a,u,l=function(t,e){function n(){this.constructor=t}for(var o in e)c.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty,d=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};i=t("./templates/item"),o=t("utils/cache"),r=t("./templates/composite"),s=t("behaviors/select"),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.template=i,e.prototype.tagName="option",e.prototype.modelEvents={"change:name":"render"},e.prototype.onBeforeRender=function(){return this.$el.val(this.model.id)},e}(Marionette.ItemView),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.mode="default",e.prototype.template=r,e.prototype.templateHelpers=function(){return{board:o.get("currentBoard").get("name"),list:o.get("currentList").get("name"),lists:this._getSwitchableLists}},e.prototype.behaviors={Select:{behaviorClass:s}},e.prototype.childView=u,e.prototype.childViewContainer="#js-tasks",e.prototype._getSwitchableLists=function(){var t;return t=_.without(_.flatten(o.get("trelloConfig").boards.map(function(t){return t.lists.map(function(t){return t.id})})),o.get("currentList").id),0!==t.length&&o.get("lists").filter(function(e){var n;return n=e.id,d.call(t,n)>=0}).map(function(t){return t.toJSON()})},e}(Marionette.CompositeView),e.exports=a},{"./templates/composite":31,"./templates/item":32,"behaviors/select":42,"utils/cache":63}],34:[function(t,e,n){"use strict";var o,r,i,s,a,u,l=function(t,e){function n(){this.constructor=t}for(var o in e)c.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;o=t("utils/cache"),r=t("./view"),s=Backbone.Radio.channel("app"),a=Backbone.Radio.channel("hotkeys"),u=Backbone.Radio.channel("settings"),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.initialize=function(t){return this.resumingTask=o.has("task")&&s.request("timerExists")===!0,this.task=null!=t&&t.task?o.set("task",t.task):o.get("task"),this.currentListConfig=o.get("currentListConfig"),this.currentListConfig.settings.keepLog&&(this.log=this.task.findOrCreateLog()),this._showTimer(),this._showView(this.task),this._setUpListeners()},e.prototype.onTimerStarted=function(){return this.taskStarted=!0,this.resumingTask===!1&&(this.task.startTime=s.request("getTimerTime"),this.task.onTimerStarted()),s.command("setMode","task")},e.prototype.onTimerEnded=function(){var t;return t=o.get("pomodori")||0,o.set("pomodori",t+1),this.task.onTimerEnded(),this._destroyTimer(),s.command("routeToShowAction")},e.prototype.onTaskFinished=function(){return this._disableExtraActions(),this.task.onTimerEnded().onTaskFinished(),s.command("routeToShowFinished")},e.prototype.onAddNote=function(t){return this._disableExtraActions(),s.command("routeToCreateNote",this.task,"ShowTask",t)},e.prototype.onVoidTask=function(){return this.task.onTaskVoided(),this._destroyTimer(),o.remove("task"),s.command("setMode","default"),s.command("routeToCreateNote",this.task,"ShowBreak")},e.prototype.onTaskCanceled=function(){return this.taskStarted&&this.task.onTaskCanceled(),o.remove("task")},e.prototype.onTimerPaused=function(){if(this.currentListConfig.settings.keepLog)return this.log.addTimerEvent("pause").log()},e.prototype.onTimerResumed=function(){if(this.currentListConfig.settings.keepLog)return this.log.addTimerEvent("resume").log()},e.prototype.openInTrello=function(){return window.open("https://trello.com/c/"+this.task.id)},e.prototype._destroyTimer=function(){return s.command("destroyTimer")},e.prototype._disableExtraActions=function(){return s.command("disableTimerExtraActions")},e.prototype._setUpListeners=function(){return this.listenTo(s,{timerStarted:this.onTimerStarted,timerEnded:this.onTimerEnded,timerPaused:this.onTimerPaused,timerResumed:this.onTimerResumed,"timer:extraAction:taskFinished":this.onTaskFinished,"timer:extraAction:addNote":this.onAddNote,"timer:extraAction:voidTask":this.onVoidTask}),this.listenTo(a,{routeHome:this.onTaskCanceled,openInTrello:this.openInTrello,completeTaskEarly:this.onTaskFinished,addNote:this.onAddNote,internalDistraction:function(t){return function(){return t.onAddNote("internal")}}(this),externalDistraction:function(t){return function(){return t.onAddNote("external")}}(this)})},e.prototype._showTimer=function(){return s.request("timerActive")===!0?(s.command("enableTimerExtraActions"),this.onTimerStarted()):s.command("showTimer",{time:u.request("get","taskTime"),extraActions:[{event:"pause",title:"Pause timer"},{event:"addNote",title:"Add a note"},{event:"voidTask",title:"Void this session"},{event:"taskFinished",title:"I'm done with this task"}],settings:{startTimerText:"Do it"}})},e.prototype._showView=function(t){return this.view=new r({model:t}),s.command("showView","main",this.view)},e}(Marionette.Object),e.exports=i},{"./view":36,"utils/cache":63}],35:[function(t,e,n){var o=t("hbsfy/runtime");e.exports=o.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,o){var r,i=e.helperMissing,s="function",a=this.escapeExpression;return'<h1 class="main__header">'+a((r=null!=(r=e.board||(null!=t?t.board:t))?r:i,typeof r===s?r.call(t,{name:"board",hash:{},data:o}):r))+": "+a((r=null!=(r=e.list||(null!=t?t.list:t))?r:i,typeof r===s?r.call(t,{name:"list",hash:{},data:o}):r))+'</h1>\n<div class="main__text">'+a((r=null!=(r=e.name||(null!=t?t.name:t))?r:i,typeof r===s?r.call(t,{name:"name",hash:{},data:o}):r))+"</div>"},useData:!0})},{"hbsfy/runtime":76}],36:[function(t,e,n){"use strict";var o,r,i,s=function(t,e){function n(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=t("utils/cache"),r=t("./templates/item.hbs"),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.mode="task",e.prototype.template=r,e.prototype.modelEvents={"change:name":"render"},e.prototype.templateHelpers=function(){return{board:o.get("currentBoard").get("name"),list:o.get("currentList").get("name")}},e}(Marionette.ItemView),e.exports=i},{"./templates/item.hbs":35,"utils/cache":63}],37:[function(t,e,n){"use strict";var o,r,i,s;r=t("./show/controller"),i=Backbone.Radio.channel("app"),s=null,o={showTimer:function(t){var e;if(e=i.request("currentSubApp"),null===s||s.subApp!==s.subApp)return s&&s.controller.destroy(),s={subApp:e,controller:new r(t)}},destroyTimer:function(){if(null!=s)return s.controller.destroy(),s=null},disableTimerExtraActions:function(){if(null!=s)return s.controller.view.ui.dial.removeClass("has-extras")},enableTimerExtraActions:function(){if(null!=s)return s.controller.view.ui.extras.length?s.controller.view.ui.dial.addClass("has-extras"):void 0},getTimerTime:function(){return null!=s?s.controller.getTimerTime():null},timerExists:function(){return null!==s},timerActive:function(){return null!=s&&s.controller.getTimerState()}},i.comply({showTimer:o.showTimer,destroyTimer:o.destroyTimer,disableTimerExtraActions:o.disableTimerExtraActions,enableTimerExtraActions:o.enableTimerExtraActions}),i.reply({getTimerTime:o.getTimerTime,timerExists:o.timerExists,timerActive:o.timerActive})},{"./show/controller":38}],38:[function(t,e,n){"use strict";var o,r,i,s,a,u,l,c,d,p,h=function(t,e){function n(){this.constructor=t}for(var o in e)f.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},f={}.hasOwnProperty;o=t("utils/cache"),r=t("components/sounds/sounds"),s=t("./view"),a=t("utils/window"),p=new r,u=Backbone.Radio.channel("app"),l=Backbone.Radio.channel("background"),c=Backbone.Radio.channel("hotkeys"),d=Backbone.Radio.channel("settings"),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.initialize=function(t){if(this._showView(t),this._setUpListeners(),t.auto===!0)return this.startTimer()},e.prototype.toggleTimer=function(){if(this.active!==!0)return this.pause===!0?this.resumeTimer():this.startTimer()},e.prototype.startTimer=function(){return this.view.triggerMethod("timerStarted"),this.active=!0,p.play("timer.start",function(){if(d.request("get","timerSound")===!0)return p.play("timer.tick")}),u.trigger("timerStarted")},e.prototype.pauseTimer=function(){return this.view.triggerMethod("timerPaused"),this.active=!1,this.pause=!0,p.stop("timer.tick"),u.trigger("timerPaused")},e.prototype.resumeTimer=function(){return this.view.triggerMethod("timerResumed"),this.active=!0,d.request("get","timerSound")===!0&&p.play("timer.tick"),u.trigger("timerResumed")},e.prototype.getTimerTime=function(){return 60*this.view.minutes+this.view.seconds},e.prototype.getTimerState=function(){return this.active===!0},e.prototype.onTimerEnded=function(){return this.active=!1,p.play("timer.end"),this._timeExpiredNotification(),u.command("destroyTimer"),u.trigger("timerEnded")},e.prototype.onTimerExtraAction=function(t){return"pause"===t?this.pauseTimer():u.trigger("timer:extraAction:"+t)},e.prototype.onDestroy=function(){return p.stop("timer.tick"),u.command("emptyRegion","timer")},e.prototype.onSettingsChanged=function(t){var e,n;if(this.active!==!0)return n=u.request("currentRoute"),"ShowTask"===n?this.view.options.time=t.taskTime:"ShowBreak"===n&&(e=$(".main__text").text().indexOf("short")?"short":"long",this.view.options.time=t[e+"BreakTime"]),this.view._setTime()._updateDial()},e.prototype._timeExpiredNotification=function(){switch(d.request("get","timeExpiredNotification")){case"flash":return a.get("app").drawAttention();case"focus":return a.get("app").focus()}},e.prototype._setUpListeners=function(){return this.listenTo(this.view,{"startTimer resumeTimer":this.toggleTimer,timerEnded:this.onTimerEnded,"timer:extraAction":this.onTimerExtraAction}),this.listenTo(c,{startTimer:this.toggleTimer}),this.listenTo(l,{"storage:settings:changed":this.onSettingsChanged})},e.prototype._showView=function(t){return this.view=new s(t),u.command("showView","timer",this.view)},e}(Marionette.Object),e.exports=i},{"./view":40,"components/sounds/sounds":51,"utils/cache":63,"utils/window":67}],39:[function(t,e,n){var o=t("hbsfy/runtime");e.exports=o.template({1:function(t,e,n,o){var r;return"\t\t\t\t"+this.escapeExpression(this.lambda(null!=(r=null!=t?t.settings:t)?r.startTimerText:r,t))+"\n"},3:function(t,e,n,o){return"\t\t\t\tStart\n"},5:function(t,e,n,o){return'\t\t\t<div class="timer__panel timer__extras-btn" title="More options"></div>\n'},7:function(t,e,n,o){var r;return'\t\t<div class="timer__extras">\n'+(null!=(r=e.each.call(t,null!=t?t.extraActions:t,{name:"each",hash:{},fn:this.program(8,o,0),inverse:this.noop,data:o}))?r:"")+"\t\t</div>\n"},8:function(t,e,n,o){var r,i=e.helperMissing,s="function",a=this.escapeExpression;return'\t\t\t\t<div class="timer__extra" title="'+a((r=null!=(r=e.title||(null!=t?t.title:t))?r:i,typeof r===s?r.call(t,{name:"title",hash:{},data:o}):r))+'" data-event="'+a((r=null!=(r=e.event||(null!=t?t.event:t))?r:i,typeof r===s?r.call(t,{name:"event",hash:{},data:o}):r))+'"></div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,o){var r;return'<div class="timer__dial">\n\t<div class="timer__panels">\n\t\t<div class="timer__panel start">\n'+(null!=(r=e["if"].call(t,null!=(r=null!=t?t.settings:t)?r.startTimerText:r,{name:"if",hash:{},fn:this.program(1,o,0),inverse:this.program(3,o,0),data:o}))?r:"")+'\t\t</div>\n\t\t<div class="timer__panel countdown">\n\t\t\t<span class="count"></span>\n\t\t\t<span class="dot"></span>\n\t\t</div>\n\t\t<div class="timer__panel resume">Start</div>\n'+(null!=(r=e["if"].call(t,null!=t?t.extraActions:t,{name:"if",hash:{},fn:this.program(5,o,0),inverse:this.noop,data:o}))?r:"")+"\t</div>\n"+(null!=(r=e["if"].call(t,null!=t?t.extraActions:t,{name:"if",hash:{},fn:this.program(7,o,0),inverse:this.noop,data:o}))?r:"")+'</div>\n<div class="timer__overlay"></div>'},useData:!0})},{"hbsfy/runtime":76}],40:[function(t,e,n){"use strict";var o,r,i=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function n(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=t("./templates/item"),r=function(e){function n(t){this._decrementTime=i(this._decrementTime,this),t.extraActions&&this._setExtraActionsBehavior(),n.__super__.constructor.apply(this,arguments)}return s(n,e),n.prototype.template=o,n.prototype.defaults={time:1500,initialTimerDelay:1e3},n.prototype.ui={dial:".timer__dial",panels:".timer__panels",start:".timer__panel.start",resume:".timer__panel.resume",extras:".timer__extra",count:".count",dot:".dot"},n.prototype.triggers={"click @ui.start":"startTimer","click @ui.resume":"resumeTimer"},n.prototype.initialize=function(t){return this.options=_.defaults(t,this.defaults),this._setTime()},n.prototype.onTimerStarted=function(){return this.ui.dial.addClass("active"),setTimeout(this._decrementTime,this.options.initialTimerDelay)},n.prototype.onTimerPaused=function(){return this.ui.dial.addClass("paused"),clearInterval(this.countdown)},n.prototype.onTimerResumed=function(){return this.ui.dial.removeClass("paused is-hovered"),setTimeout(this._decrementTime,this.options.initialTimerDelay)},n.prototype.onTimerEnded=function(){return clearInterval(this.countdown),this.trigger("timerEnded")},n.prototype.onShow=function(){return $(".main__region").addClass("has-timer")},n.prototype.onDestroy=function(){return $(".main__region").removeClass("has-timer")},n.prototype.onBeforeShow=function(){return this._updateDial()},n.prototype.serializeData=function(){return this.options},n.prototype._decrementTime=function(){return 0===this.seconds?(this.minutes--,this.seconds=59):this.seconds--,0===this.minutes&&0===this.seconds?this.onTimerEnded():(this._updateDial(),this.countdown=setTimeout(this._decrementTime,1e3))},n.prototype._updateDial=function(){return this.ui.count.text(0===this.minutes?this.seconds:this.minutes),this.ui.dot.css("transform","rotate(-"+6*(60-this.seconds)+"deg)")},n.prototype._setTime=function(){var t;return t=this.options.time,this.minutes=Math.floor(t/60),this.seconds=t%60,this},n.prototype._setExtraActionsBehavior=function(){return this.behaviors=this.behaviors||{},this.behaviors.ExtraActions={behaviorClass:t("behaviors/timerExtraActions")}},n}(Marionette.ItemView),e.exports=r},{"./templates/item":39,"behaviors/timerExtraActions":43}],41:[function(t,e,n){"use strict";var o,r=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.ui={input:".main-input"},e.prototype.events={"keypress @ui.input":"onKeyPress","keydown @ui.input":"onKeyDown"},e.prototype.onRender=function(){return setTimeout(function(t){return function(){return t.ui.input.focus()}}(this),0)},e.prototype.onKeyPress=function(t){return 13===t.which?this.view.trigger("submit",this.ui.input.val()):t.stopPropagation()},e.prototype.onKeyDown=function(t){return 27===t.which?this.view.trigger("goBack"):32===t.which?t.stopPropagation():void 0},e}(Marionette.Behavior),e.exports=o},{}],42:[function(t,e,n){"use strict";var o,r=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.ui={label:".select__label",select:".select__dropdown"},e.prototype.triggers={"change @ui.select":"select:selected"},e}(Marionette.Behavior),e.exports=o},{}],43:[function(t,e,n){"use strict";var o,r=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.ui={dial:".timer__dial",panels:".timer__panels",showExtrasBtn:".timer__extras-btn",extraBtn:".timer__extra"},e.prototype.events={"click @ui.showExtrasBtn":"toggleExtraActions","click @ui.extraBtn":"clickExtraAction","mouseenter @ui.dial.has-extras:not(.extras-active) @ui.panels":"showExtraActionsButton","mouseleave @ui.dial.has-extras:not(.extras-active) @ui.panels":"hideExtraActionsButton"},e.prototype.onTimerStarted=function(){return setTimeout(function(t){return function(){return t.ui.dial.addClass("has-extras")}}(this),1e3)},e.prototype.showExtraActionsButton=function(){return this.ui.dial.addClass("is-hovered"),this.extraOptionsButtonTimeout=setTimeout(function(t){return function(){return t.hideExtraActionsButton()}}(this),3e3)},e.prototype.hideExtraActionsButton=function(){return this.ui.dial.removeClass("is-hovered"),clearTimeout(this.extraOptionsButtonTimeout)},e.prototype.toggleExtraActions=function(){return this.ui.dial.toggleClass("extras-active"),clearTimeout(this.extraOptionsButtonTimeout)},e.prototype.hideExtraActions=function(){return this.ui.dial.removeClass("extras-active")},e.prototype.clickExtraAction=function(){var t;return this.hideExtraActionsButton(),this.hideExtraActions(),t=$(event.target).attr("data-event"),this.view.trigger("timer:extraAction",t)},e}(Marionette.Behavior),e.exports=o},{}],44:[function(t,e,n){"use strict";var o;o=Backbone.Radio.channel("background"),chrome.runtime.onMessage.addListener(function(t,e,n){if(t.trigger)return o.trigger(t.trigger,t.data)})},{}],45:[function(t,e,n){"use strict";var o,r,i,s,a,u,l=function(t,e){function n(){this.constructor=t}for(var o in e)c.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;o=t("components/backgroundChannel/backgroundChannel"),i=t("utils/cache"),s=t("entities/pomello/api"),a=t("utils/storage"),u=Backbone.Radio.channel("background"),r=function(t){function e(t){this.app=t.app,this._setUpBaseControllerListeners(),this._getPomelloAccount(),e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.onPomelloTokenChanged=function(t){if(this._setPomelloToken(t),null==t)return this._clearPomelloAccount()},e.prototype.onPomelloUserChanged=function(t){if(i.set("pomelloUser",t||!1),null==t)return this._clearPomelloAccount()},e.prototype.showView=function(t,e){return this.view.triggerMethod("showView",t,e)},e.prototype.emptyRegion=function(t){return this.view.triggerMethod("emptyRegion",t)},e.prototype.startSubApp=function(t){if(!this.currentApp||this.currentApp.constructor!==t)return this.currentApp&&this.currentApp.destroy(),this.currentApp=new(Function.prototype.bind.apply(t,arguments))},e.prototype.getCurrentSubApp=function(){return this.currentApp.constructor},e.prototype._getPomelloAccount=function(){return new Promise(function(t){return function(e,n){return i.has("pomelloUser")&&e(i.get("pomelloUser")),a.get("pomelloUser,pomelloToken").then(function(n){var o,r;return r=n.pomelloUser,o=n.pomelloToken,r&&o?t._setPomelloToken(o):t._clearPomelloAccount(),e(i.set("pomelloUser",r||!1))})}}(this))},e.prototype._clearPomelloAccount=function(){return a.remove("pomelloToken"),a.remove("pomelloUser")},e.prototype._setPomelloToken=function(t){var e;return e=new s,e.setToken(t)},e.prototype._setUpBaseControllerListeners=function(){return this.app.channel.comply({showView:this.showView,emptyRegion:this.emptyRegion,startSubApp:this.startSubApp},this),this.app.channel.reply({currentSubApp:this.getCurrentSubApp,pomelloInit:this._getPomelloAccount},this),this.listenTo(u,{"storage:pomelloToken:changed":this.onPomelloTokenChanged,"storage:pomelloUser:changed":this.onPomelloUserChanged})},e}(Marionette.Object),e.exports=r},{"components/backgroundChannel/backgroundChannel":44,"entities/pomello/api":53,"utils/cache":63,"utils/storage":66}],46:[function(t,e,n){"use strict";e.exports=[{catName:"General",hotkeys:[{name:"Menu",desc:"Toggle menu",command:"toggleMenu","default":"m"},{name:"Home",desc:"Navigate to main screen",command:"routeHome","default":"home"},{name:"Sync",desc:"Sync data from Trello",command:"syncTrello","default":"f5"},{name:"Create task",desc:"Create a new task in Trello",command:"createTask","default":"ctrl+shift+n"},{name:"Productivity",desc:"Show productivity page",command:"routeProductivity","default":"ctrl+m"},{name:"Settings",desc:"Show settings page",command:"routeSettings","default":"ctrl+,"},{name:"Open in Trello",desc:"Open the current board or task in Trello",command:"openInTrello","default":"ctrl+o"}]},{catName:"Trello",hotkeys:[{name:"Previous Board",desc:"Switch to previous board",command:"prevBoard","default":"ctrl+up ctrl+up"},{name:"Next Board",desc:"Switch to next board",command:"nextBoard","default":"ctrl+down ctrl+down"},{name:"Previous List",desc:"Switch to previous list",command:"prevList","default":"ctrl+left ctrl+left"},{name:"Next List",desc:"Switch to next list",command:"nextList","default":"ctrl+right ctrl+right"}]},{catName:"Task",hotkeys:[{name:"Start",desc:"Start timer",command:"startTimer","default":"space"},{name:"Add note",desc:"Leave a note",command:"addNote","default":"ctrl+n"},{name:"Internal distraction",desc:"Mark an internal distraction",command:"internalDistraction","default":"ctrl+'"},{name:"External distraction",desc:"Mark an external distraction",command:"externalDistraction","default":"ctrl+-"},{name:"Continue Task",desc:"Continue same task after break",command:"contTask","default":"c"},{name:"Move Task",desc:"Move completed task to last used list",command:"moveTask","default":"d"},{name:"Complete Task",desc:"Mark task completed while timer is running",command:"completeTaskEarly","default":"ctrl+shift+d"}]}]},{}],47:[function(t,e,n){"use strict";var o,r,i,s,a,u,l,c,d,p=function(t,e){return function(){return t.apply(e,arguments)}};o=t("./defaults"),r=t("utils/helpers"),s=t("mousetrap"),a=t("utils/storage"),l=new r,c=Backbone.Radio.channel("hotkeys"),u=Backbone.Radio.channel("background"),d=new s(document.querySelector("body")),i=function(){function t(){this.setHotkeyBindings=p(this.setHotkeyBindings,this),this.hotkeys=this._parseHotkeys(),a.get("bindings").then(this.setHotkeyBindings),this._setUpListeners()}var e;return e={},t.prototype.getBinding=function(t){return e[t]===!1?null:e[t].split(" ").map(function(t){return t.split("+").map(l.ucfirst).join("+")}).join(" ")},t.prototype.setBinding=function(t,n){return e[t]=n,a.set("bindings",e)},t.prototype.getUserBindings=function(){return e},t.prototype.setHotkeyBindings=function(t){return null==t&&(t={}),d.reset(),
this.hotkeys.map(function(n){var o;return t[n.command]!==!1?(o=null!=t[n.command]?t[n.command]:n["default"],e[n.command]=o,d.bind(o,function(){return c.trigger(n.command)})):e[n.command]=!1})},t.prototype._setUpListeners=function(){return u.on("storage:bindings:changed",this.setHotkeyBindings),c.reply({get:this.getBinding,userBindings:this.getUserBindings},this),c.comply({set:this.setBinding},this)},t.prototype._parseHotkeys=function(){return _.chain(o).map(function(t){return t.hotkeys}).flatten().value()},t}(),e.exports=new i},{"./defaults":46,mousetrap:79,"utils/helpers":64,"utils/storage":66}],48:[function(t,e,n){"use strict";Marionette.Application.prototype._initChannel=function(){return this.channelName=_.result(this,"channelName")||"global",this.channel=_.result(this,"channel")||Backbone.Radio.channel(this.channelName)}},{}],49:[function(t,e,n){"use strict";var o;o=[{catName:"General",settings:[{name:"alwaysOnTop",desc:"Always on top","default":!0,type:"checkbox"},{name:"snapEdges",desc:"Snap to screen edges","default":!1,type:"checkbox",hint:'Not recommended on multi-monitor setups. See <a href="https://trello.com/c/LLsePjPD" target="_blank">here</a>.'},{name:"timeExpiredNotification",desc:"Time expired notification","default":"focus",type:"select",options:[{value:"",text:"None"},{value:"flash",text:"Flash"},{value:"focus",text:"Focus"}]},{name:"showStandaloneNotification",desc:"Show standalone version notification","default":!0,type:"checkbox",hint:"On start up, show a reminder to switch to standalone version of Pomello"}]},{catName:"Timers",settings:[{name:"taskTime",desc:"Task","default":1500,type:"select",options:[{value:"60",text:"1"},{value:"120",text:"2"},{value:"180",text:"3"},{value:"240",text:"4"},{value:"300",text:"5"},{value:"360",text:"6"},{value:"420",text:"7"},{value:"480",text:"8"},{value:"540",text:"9"},{value:"600",text:"10"},{value:"660",text:"11"},{value:"720",text:"12"},{value:"780",text:"13"},{value:"840",text:"14"},{value:"900",text:"15"},{value:"960",text:"16"},{value:"1020",text:"17"},{value:"1080",text:"18"},{value:"1140",text:"19"},{value:"1200",text:"20"},{value:"1260",text:"21"},{value:"1320",text:"22"},{value:"1380",text:"23"},{value:"1440",text:"24"},{value:"1500",text:"25"},{value:"1560",text:"26"},{value:"1620",text:"27"},{value:"1680",text:"28"},{value:"1740",text:"29"},{value:"1800",text:"30"},{value:"1860",text:"31"},{value:"1920",text:"32"},{value:"1980",text:"33"},{value:"2040",text:"34"},{value:"2100",text:"35"},{value:"2160",text:"36"},{value:"2220",text:"37"},{value:"2280",text:"38"},{value:"2340",text:"39"},{value:"2400",text:"40"},{value:"2460",text:"41"},{value:"2520",text:"42"},{value:"2580",text:"43"},{value:"2640",text:"44"},{value:"2700",text:"45"},{value:"2760",text:"46"},{value:"2820",text:"47"},{value:"2880",text:"48"},{value:"2940",text:"49"},{value:"3000",text:"50"},{value:"3060",text:"51"},{value:"3120",text:"52"},{value:"3180",text:"53"},{value:"3240",text:"54"},{value:"3300",text:"55"},{value:"3360",text:"56"},{value:"3420",text:"57"},{value:"3480",text:"58"},{value:"3540",text:"59"},{value:"3600",text:"60"},{value:"3660",text:"61"},{value:"3720",text:"62"},{value:"3780",text:"63"},{value:"3840",text:"64"},{value:"3900",text:"65"},{value:"3960",text:"66"},{value:"4020",text:"67"},{value:"4080",text:"68"},{value:"4140",text:"69"},{value:"4200",text:"70"},{value:"4260",text:"71"},{value:"4320",text:"72"},{value:"4380",text:"73"},{value:"4440",text:"74"},{value:"4500",text:"75"},{value:"4560",text:"76"},{value:"4620",text:"77"},{value:"4680",text:"78"},{value:"4740",text:"79"},{value:"4800",text:"80"},{value:"4860",text:"81"},{value:"4920",text:"82"},{value:"4980",text:"83"},{value:"5040",text:"84"},{value:"5100",text:"85"},{value:"5160",text:"86"},{value:"5220",text:"87"},{value:"5280",text:"88"},{value:"5340",text:"89"},{value:"5400",text:"90"},{value:"5460",text:"91"},{value:"5520",text:"92"},{value:"5580",text:"93"},{value:"5640",text:"94"},{value:"5700",text:"95"},{value:"5760",text:"96"},{value:"5820",text:"97"},{value:"5880",text:"98"},{value:"5940",text:"99"}],suffix:"min"},{name:"shortBreakTime",desc:"Short break","default":300,type:"select",options:[{value:"60",text:"1"},{value:"120",text:"2"},{value:"180",text:"3"},{value:"240",text:"4"},{value:"300",text:"5"},{value:"360",text:"6"},{value:"420",text:"7"},{value:"480",text:"8"},{value:"540",text:"9"},{value:"600",text:"10"},{value:"660",text:"11"},{value:"720",text:"12"},{value:"780",text:"13"},{value:"840",text:"14"},{value:"900",text:"15"},{value:"960",text:"16"},{value:"1020",text:"17"},{value:"1080",text:"18"},{value:"1140",text:"19"},{value:"1200",text:"20"},{value:"1260",text:"21"},{value:"1320",text:"22"},{value:"1380",text:"23"},{value:"1440",text:"24"},{value:"1500",text:"25"},{value:"1560",text:"26"},{value:"1620",text:"27"},{value:"1680",text:"28"},{value:"1740",text:"29"},{value:"1800",text:"30"},{value:"1860",text:"31"},{value:"1920",text:"32"},{value:"1980",text:"33"},{value:"2040",text:"34"},{value:"2100",text:"35"},{value:"2160",text:"36"},{value:"2220",text:"37"},{value:"2280",text:"38"},{value:"2340",text:"39"},{value:"2400",text:"40"},{value:"2460",text:"41"},{value:"2520",text:"42"},{value:"2580",text:"43"},{value:"2640",text:"44"},{value:"2700",text:"45"},{value:"2760",text:"46"},{value:"2820",text:"47"},{value:"2880",text:"48"},{value:"2940",text:"49"},{value:"3000",text:"50"},{value:"3060",text:"51"},{value:"3120",text:"52"},{value:"3180",text:"53"},{value:"3240",text:"54"},{value:"3300",text:"55"},{value:"3360",text:"56"},{value:"3420",text:"57"},{value:"3480",text:"58"},{value:"3540",text:"59"},{value:"3600",text:"60"},{value:"3660",text:"61"},{value:"3720",text:"62"},{value:"3780",text:"63"},{value:"3840",text:"64"},{value:"3900",text:"65"},{value:"3960",text:"66"},{value:"4020",text:"67"},{value:"4080",text:"68"},{value:"4140",text:"69"},{value:"4200",text:"70"},{value:"4260",text:"71"},{value:"4320",text:"72"},{value:"4380",text:"73"},{value:"4440",text:"74"},{value:"4500",text:"75"},{value:"4560",text:"76"},{value:"4620",text:"77"},{value:"4680",text:"78"},{value:"4740",text:"79"},{value:"4800",text:"80"},{value:"4860",text:"81"},{value:"4920",text:"82"},{value:"4980",text:"83"},{value:"5040",text:"84"},{value:"5100",text:"85"},{value:"5160",text:"86"},{value:"5220",text:"87"},{value:"5280",text:"88"},{value:"5340",text:"89"},{value:"5400",text:"90"},{value:"5460",text:"91"},{value:"5520",text:"92"},{value:"5580",text:"93"},{value:"5640",text:"94"},{value:"5700",text:"95"},{value:"5760",text:"96"},{value:"5820",text:"97"},{value:"5880",text:"98"},{value:"5940",text:"99"}],suffix:"min"},{name:"longBreakTime",desc:"Long break","default":900,type:"select",options:[{value:"60",text:"1"},{value:"120",text:"2"},{value:"180",text:"3"},{value:"240",text:"4"},{value:"300",text:"5"},{value:"360",text:"6"},{value:"420",text:"7"},{value:"480",text:"8"},{value:"540",text:"9"},{value:"600",text:"10"},{value:"660",text:"11"},{value:"720",text:"12"},{value:"780",text:"13"},{value:"840",text:"14"},{value:"900",text:"15"},{value:"960",text:"16"},{value:"1020",text:"17"},{value:"1080",text:"18"},{value:"1140",text:"19"},{value:"1200",text:"20"},{value:"1260",text:"21"},{value:"1320",text:"22"},{value:"1380",text:"23"},{value:"1440",text:"24"},{value:"1500",text:"25"},{value:"1560",text:"26"},{value:"1620",text:"27"},{value:"1680",text:"28"},{value:"1740",text:"29"},{value:"1800",text:"30"},{value:"1860",text:"31"},{value:"1920",text:"32"},{value:"1980",text:"33"},{value:"2040",text:"34"},{value:"2100",text:"35"},{value:"2160",text:"36"},{value:"2220",text:"37"},{value:"2280",text:"38"},{value:"2340",text:"39"},{value:"2400",text:"40"},{value:"2460",text:"41"},{value:"2520",text:"42"},{value:"2580",text:"43"},{value:"2640",text:"44"},{value:"2700",text:"45"},{value:"2760",text:"46"},{value:"2820",text:"47"},{value:"2880",text:"48"},{value:"2940",text:"49"},{value:"3000",text:"50"},{value:"3060",text:"51"},{value:"3120",text:"52"},{value:"3180",text:"53"},{value:"3240",text:"54"},{value:"3300",text:"55"},{value:"3360",text:"56"},{value:"3420",text:"57"},{value:"3480",text:"58"},{value:"3540",text:"59"},{value:"3600",text:"60"},{value:"3660",text:"61"},{value:"3720",text:"62"},{value:"3780",text:"63"},{value:"3840",text:"64"},{value:"3900",text:"65"},{value:"3960",text:"66"},{value:"4020",text:"67"},{value:"4080",text:"68"},{value:"4140",text:"69"},{value:"4200",text:"70"},{value:"4260",text:"71"},{value:"4320",text:"72"},{value:"4380",text:"73"},{value:"4440",text:"74"},{value:"4500",text:"75"},{value:"4560",text:"76"},{value:"4620",text:"77"},{value:"4680",text:"78"},{value:"4740",text:"79"},{value:"4800",text:"80"},{value:"4860",text:"81"},{value:"4920",text:"82"},{value:"4980",text:"83"},{value:"5040",text:"84"},{value:"5100",text:"85"},{value:"5160",text:"86"},{value:"5220",text:"87"},{value:"5280",text:"88"},{value:"5340",text:"89"},{value:"5400",text:"90"},{value:"5460",text:"91"},{value:"5520",text:"92"},{value:"5580",text:"93"},{value:"5640",text:"94"},{value:"5700",text:"95"},{value:"5760",text:"96"},{value:"5820",text:"97"},{value:"5880",text:"98"},{value:"5940",text:"99"}],suffix:"min"},{name:"timerSound",desc:"Play ticking sound","default":!1,type:"checkbox"}]},{catName:"Tasks",settings:[{name:"titleMarker",desc:"Card title Pomodoro marker","default":"",type:"select",options:[{value:"",text:"&#x1F345;"},{value:"",text:"&#x2713;"}]},{name:"completedTaskPosition",desc:"Completed tasks list position","default":"top",type:"select",options:[{value:"top",text:"Top"},{value:"bottom",text:"Bottom"}]}]}],e.exports=o},{}],50:[function(t,e,n){"use strict";var o,r,i,s,a,u=function(t,e){return function(){return t.apply(e,arguments)}};o=t("./defaults"),i=t("utils/storage"),s=Backbone.Radio.channel("background"),a=Backbone.Radio.channel("settings"),r=function(){function t(){this._setSettings=u(this._setSettings,this),this.defaults=this._parseSettings(),this._setUpListeners()}return t.prototype.getSetting=function(t){return"object"==typeof t?_.object(t,t.map(function(t){return function(e){return t.settings[e]}}(this))):this.settings[t]},t.prototype.setSetting=function(t,e){return this.settings[t]=e,i.set("settings",this.settings)},t.prototype.getUserSettings=function(){return this.settings},t.prototype.initialize=function(){return new Promise(function(t){return function(e,n){return null!=t.settings&&e(),i.get("settings").then(function(n){return t._setSettings(n),e()})}}(this))},t.prototype._setSettings=function(t){return null==t&&(t={}),this.settings=_.defaults(t,this.defaults)},t.prototype._setUpListeners=function(){return s.on("storage:settings:changed",this._setSettings),a.reply({get:this.getSetting,userSettings:this.getUserSettings},this),a.comply({set:this.setSetting},this)},t.prototype._parseSettings=function(){return _.chain(o).map(function(t){return t.settings}).flatten().map(function(t){return[t.name,t["default"]]}).object().value()},t}(),e.exports=new r},{"./defaults":49,"utils/storage":66}],51:[function(t,e,n){"use strict";var o,r;o=t("howler"),r=function(){function t(){}var e,n;return e={},n={timer:{start:new Howl({src:["sounds/wind-up.mp3"],volume:1}),tick:new Howl({src:["sounds/egg-timer.ogg"],volume:.7,onend:function(){return this.play()}}),end:new Howl({src:["sounds/ding.mp3"],volume:1})}},t.prototype.play=function(t,e){return this._getSound(t).on("end",e).play(),this},t.prototype.stop=function(t,e){return this._getSound(t).on("end",e).stop(),this},t.prototype._getSound=function(t){return t.split(".").reduce(function(t,e){return t[e]},n)},t}(),e.exports=r},{howler:77}],52:[function(t,e,n){"use strict";var o,r;o=function(){function t(){_.bindAll(this,"sync")}return t.prototype.ajax=function(t){return null!=this.ajaxDefaults&&$.extend(!0,t,this.ajaxDefaults),null!=t.params&&(t.url=this._appendParams(t.url,t.params)),$.ajax.apply($,arguments)},t.prototype.sync=function(t,e,n){var o,i,s,a;return s=r[t],i={type:s,dataType:"json"},null!=e.params&&_.extend(i,{params:e.params}),n.url||(i.url=_.result(e,"url")||urlError()),null!=n.data||!e||"create"!==t&&"update"!==t&&"patch"!==t||(i.contentType="application/json",i.data=JSON.stringify(n.attrs||e.toJSON(n))),"GET"!==i.type&&(i.processData=!1),o=n.error,n.error=function(t,e,r){if(n.textStatus=e,n.errorThrown=r,o)return o.call(n.context,t,e,r)},a=n.xhr=this.ajax(_.extend(i,n)),e.trigger("request",e,a,n),a},t.prototype.setToken=function(t){return this.api.token=t},t.prototype._appendParams=function(t,e){var n;return n=t.indexOf("?")!==-1?"&":"?",t+n+$.param(e)},t}(),r={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"},e.exports=o},{}],53:[function(t,e,n){"use strict";var o,r,i,s,a=function(t,e){function n(){this.constructor=t}for(var o in e)u.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;o=t("entities/baseApi"),r=t("utils/notifications"),s=t("utils/storage"),i=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.ajaxDefaults={headers:{Authorization:"Bearer "+this.api.token},beforeSend:function(t){return function(e,n){return n.url=t.api.url+"/v"+t.api.version+n.url}}(this),error:function(t,e,n){var o;return o=function(){switch(t.responseJSON.error){case"invalid or expired token":return"An error occured with Pomello. Please log in again."}}(),"invalid or expired token"===t.responseJSON.error&&s.remove("pomelloToken"),r.create("pomelloError",{title:"Couldn't log in to Pomello",message:o})}}}var n;return a(e,t),e.prototype.api={version:1,url:"ahjnfakocpfoocnncbgmondnnnlfjide"===(n=window.location.host)||"fcnekdnodniicpdbpgoikgadipkbmljc"===n||"jlkelfhggnjpjefkcfokmadeibmhndcl"===n||"bjpkpffdogbfekhlppoiamhiaiaalkep"===n?"http://api.pomelloapp.com":"http://api.pomelloapp.dev:8000"},e.prototype.ajax=function(){if(null!=this.api.token)return e.__super__.ajax.apply(this,arguments)},e}(o),e.exports=i},{"entities/baseApi":52,"utils/notifications":65,"utils/storage":66}],54:[function(t,e,n){"use strict";var o,r,i,s,a=function(t,e){function n(){this.constructor=t}for(var o in e)u.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;o=t("entities/baseApi"),r=t("utils/notifications"),i=t("utils/storage"),s=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.ajaxDefaults={beforeSend:function(t){return function(e,n){return n.url=t.api.url+"/"+t.api.version+t._appendParams(n.url,{key:t.api.key,token:t.api.token})}}(this),error:function(t,e,n){var o;return o=function(){switch(e){case"timeout":return"Could not connect to Trello.";case"error":return"An error occured with Trello. ("+n+")"}}(),"Unauthorized"===n&&i.remove("trelloToken"),r.create({message:o})}}}return a(e,t),e.prototype.api={version:1,url:"https://trello.com",key:"a20e2cea45272511528ad2f6b14b0edc",name:chrome.i18n.getMessage("appName").replace(" ","+"),expiration:"never",scope:"read,write"},e.prototype.ajax=function(){if(null==this.api.token)throw Error("Trello token not set");return e.__super__.ajax.apply(this,arguments)},e}(o),e.exports=s},{"entities/baseApi":52,"utils/notifications":65,"utils/storage":66}],55:[function(t,e,n){"use strict";var o,r,i,s,a,u=function(t,e){function n(){this.constructor=t}for(var o in e)l.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;o=t("./api"),s=Backbone.Radio.channel("entities"),a=new o,i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.sync=a.sync,e}(Backbone.Model),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.sync=a.sync,e}(Backbone.Collection),e.exports={Model:i,Collection:r}},{"./api":54}],56:[function(t,e,n){"use strict";var o,r,i,s,a,u,l,c,d,p=function(t,e){function n(){this.constructor=t}for(var o in e)h.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},h={}.hasOwnProperty,f=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};r=t("utils/cache"),i=t("utils/helpers"),s=t("utils/storage"),a=t("./base"),c=Backbone.Radio.channel("entities"),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.urlRoot="/boards",e}(a.Model),l=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.url="/members/me/boards",e.prototype.params={filter:"open",fields:"name,prefs",lists:"open"},e.prototype.model=u,e}(a.Collection),o={initBoardsCollection:function(t){var e;return e=new l(t),r.set("boards",e),d()},setCurrentBoard:function(t){return new Promise(function(e,n){var o,i,a,u,l,c;return l=r.get(["trelloConfig","boards","currentBoard"]),c=l.trelloConfig,a=l.boards,u=l.currentBoard,null!=u&&u.id===t&&e(u),t=t&&a.findWhere({id:t})?t:c.currentBoard&&a.findWhere({id:c.currentBoard})?c.currentBoard:c.boards[0].id,o=a.findWhere({id:t}),i=_.findWhere(c.boards,{id:t}),c.currentBoard=t,null==i&&n("Couldnt find current board"),r.set({currentBoard:o,currentBoardConfig:i}),s.set("trelloConfig",c).then(function(){return e(o)})})},setAdjacentBoard:function(t){return new Promise(function(e,n){var s,a,u,l,c,d,p;return l=new i,d=r.get(["trelloConfig","currentBoard"]),p=d.trelloConfig,a=d.currentBoard,1===p.boards.length?n():(u=l.getIndexById(p.boards,a.id),s=l.getAdjacentIndex(p.boards,u,t),c=p.boards[s].id,o.setCurrentBoard(c).then(function(t){return e(t)}))})}},d=function(){var t,e,n,o,i,s,a,u,l;if(s=r.get(["trelloConfig","boards"]),l=s.trelloConfig,e=s.boards,"undefined"!=typeof trellConfig&&null!==trellConfig&&l.length!==e.length){for(u=[],a=l.boards,n=0,o=a.length;n<o;n++)t=a[n],i=e.findWhere({id:t.id}),i||u.push(t.id);return l.boards=_.reject(l.boards,function(t){var e;return e=t.id,f.call(u,e)>=0}),r.set("trelloConfig",l)}},c.comply({initBoardsCollection:o.initBoardsCollection}),c.reply({setCurrentBoard:o.setCurrentBoard,setAdjacentBoard:o.setAdjacentBoard}),e.exports=l},{"./base":55,"utils/cache":63,"utils/helpers":64,"utils/storage":66}],57:[function(t,e,n){"use strict";var o,r,i;r=t("moment"),i=Backbone.Radio.channel("settings"),o={parseText:function(t){var e;return e=t.match(/(.+)/gm),{header:e.splice(0,2)[0],timeSpent:e.splice(0,3).join("\n"),footer:e.pop(),json:e.splice(-3)[1],log:e}},updateJson:function(t,e,n){var o;return null==e&&(e=0),t=this.decodeJson(t),o=_.last(t),"start"===n?(t.push([e]),null!=o&&1===o.length&&o.push(null)):null!=o&&1===o.length?o.push(e):t.push([null,e]),this.encodeJson(t)},updateTimeSpent:function(t,e,n){var o;return n=this.decodeJson(n),o="*not enough data*","complete"===e&&(t=t.replace("Current","Total")),n.length&&1!==n[0].length&&(1===_.last(n).length&&n.pop(),o=this.humanizeTime(this.calculateTotalTime(n))),this.isIncompleteJson(n)===!0&&(o+="\\*"),t.replace(/(.+:\*\*\s)(.+)?/,"$1"+o)},addTimestamp:function(t){return t+=" - *"+r().format("h:mm a on MMM D, YYYY")+"*"},getLine:function(t){return"complete"===t?"Task completed":"void"===t?"Task voided":"pause"===t||"resume"===t?"Timer "+t+"d":"Timer "+t+"ed"},calculateTotalTime:function(t){var e,n,o,r,s,a,u;for(a=i.request("get","taskTime"),u=0,n=0,o=t.length;n<o;n++)r=t[n],s=r[0]||a,e=r[1]||0,u+=s-e;return u},humanizeTime:function(t){var e,n,o,r,i;return t<60?"Less than a minute":(i="",e=Math.floor(t/3600),o=Math.round(t%3600/60),n="hour",r="minute",e>1&&(n+="s"),o>1&&(r+="s"),e&&(i=e+" "+n),e&&o&&(i+=" and "),i+=o+" "+r)},isIncompleteJson:function(t){return _.indexOf(_.flatten(t),null)!==-1},encodeJson:function(t){return">*#"+btoa(JSON.stringify(t))+"*"},decodeJson:function(t){var e;return e=/>\*#(\S+)\*/.exec(t),null!==e?JSON.parse(atob(e[1])):[]},template:"**Pomello Log**\n \n---\n**Current time spent:** **\n---\n\n \n>\n \n*Do not delete. Please avoid editing this comment.*"},e.exports=o},{moment:78}],58:[function(t,e,n){"use strict";var o;o={parseTitle:function(t){var e,n,o,r,i;return i=Backbone.Radio.channel("settings"),e=0,n=i.request("get","titleMarker"),o=new RegExp("(?:(\\d+)?(||||||)?\\s"+n+")?(.+)"),r=o.exec(t),null!=r[1]&&(e=parseInt(r[1],10)),null!=r[2]&&(e+=this.getDecimal(r[2])),{checks:e,title:r[3].trim()}},generatePomelloData:function(t){var e,n,o,r,i;return 0===t?"":(i=Backbone.Radio.channel("settings"),n=i.request("get","titleMarker"),o=Math.floor(t),r=0!==o?o:"",e=this.getFraction(t%1)||"",r+=e+" "+n+" ")},getDecimal:function(t){var e;return e={"":.125,"":.25,"":.375,"":.5,"":.625,"":.75,"":.875},e[t]},getFraction:function(t){var e;return e={.125:"",.25:"",.375:"",.5:"",.625:"",.75:"",.875:""},e[t]},roundToNearestEighth:function(t){return[.125,.25,.375,.5,.625,.75,.875,1].reduce(function(e,n,o){return Math.abs(n-t)<Math.abs(e-t)?n:e})}},e.exports=o},{}],59:[function(t,e,n){"use strict";var o,r,i,s,a,u,l,c,d,p=function(t,e){function n(){this.constructor=t}for(var o in e)h.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},h={}.hasOwnProperty;r=t("utils/cache"),s=t("utils/storage"),a=t("./base"),i=t("utils/helpers"),c=Backbone.Radio.channel("entities"),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.urlRoot="/lists",e}(a.Model),l=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.url=function(){if(null!=this.boardId)return"/boards/"+this.boardId+"/lists";throw new Error("[boardId] is not defined")},e.prototype.model=u,e}(a.Collection),o={initListsCollection:function(t){var e;return e=_.flatten(t.map(function(t){return t.lists.map(function(e){return e.nameBoard=t.name,e})})),r.set("lists",new l(e)),d()},setCurrentList:function(t){return new Promise(function(e,n){var o,i,a,u,l,c,d,p;return d=r.get(["trelloConfig","lists","currentList","currentBoard","currentBoardConfig"]),p=d.trelloConfig,c=d.lists,a=d.currentList,o=d.currentBoard,i=d.currentBoardConfig,null!=a&&a.id===t&&e(a),t=t&&_.findWhere(i.lists,{id:t})?t:i.currentList&&c.findWhere({id:i.currentList})?i.currentList:i.lists[0].id,u=c.get(t),l=_.findWhere(i.lists,{id:t}),i.currentList=t,r.set({currentList:u,currentListConfig:l}),s.set("trelloConfig",p).then(function(){return e(u)})})},setAdjacentList:function(t){return new Promise(function(e,n){var s,a,u,l,c,d,p,h,f;return c=new i,p=r.get(["trelloConfig","currentBoard","currentList"]),h=p.trelloConfig,a=p.currentBoard,u=p.currentList,f=_.findWhere(h.boards,{id:a.id}),1===f.lists.length?n():(l=c.getIndexById(f.lists,u.id),s=c.getAdjacentIndex(f.lists,l,t),d=f.lists[s].id,o.setCurrentList(d).then(function(t){return e(t)}))})}},d=function(){var t,e,n,o,i,s,a,u,l,c,d,p,h,f,m,_,v,y;if(h=r.get(["trelloConfig","lists"]),y=h.trelloConfig,d=h.lists,v=[],null!=y)for(f=y.boards,e=n=0,s=f.length;n<s;e=++n)for(t=f[e],m=t.lists,c=o=0,a=m.length;o<a;c=++o)l=m[c],p=d.findWhere({id:l.id}),null==p&&v.push({board:e,list:c,id:l.id});if(v.length){for(i=0,u=v.length;i<u;i++)_=v[i],t=y.boards[_.board],t.lists.splice(_.list,1),t.lists.length||(y.boards.splice(_.board,1),y.currentBoard===t.id&&delete y.currentBoard);return r.set("trelloConfig",y)}},c.comply({initListsCollection:o.initListsCollection}),c.reply({setCurrentList:o.setCurrentList,setAdjacentList:o.setAdjacentList}),e.exports=l},{"./base":55,"utils/cache":63,"utils/helpers":64,"utils/storage":66}],60:[function(t,e,n){"use strict";var o,r,i,s,a=function(t,e){function n(){this.constructor=t}for(var o in e)u.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;o=t("./helpers/log"),r=t("./base"),s=Backbone.Radio.channel("app"),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.defaults={text:o.template},e.prototype.url=function(){var t;return t=function(){if(null!=this.cardId)return"/cards/"+this.cardId+"/actions/comments";throw new Error("[cardId] is not defined")}.call(this),null!=this.commentId&&(t=t.replace("actions/","actions/"+this.commentId+"/")),t},e.prototype.initialize=function(t){return this.cardId=t.cardId,this.commentId=t.commentId,this.data=o.parseText(this.get("text"))},e.prototype.addLog=function(t,e){return null==e&&(e=!0),e===!0&&(t=o.addTimestamp(t)),this.data.log.unshift(t)},e.prototype.addNote=function(t,e){return t=function(){switch(t){case"general":return"Note";case"internal":return"Internal distraction";case"external":return"External interruption"}}(),e.length&&(t+=": "),this.addLog("**"+t+"**"+e),this},e.prototype.addTimerEvent=function(t){var e;return e=o.getLine(t),"start"!==t&&"end"!==t||this._updateJson(t),this.addLog(e),this.data.timeSpent=o.updateTimeSpent(this.data.timeSpent,t,this.data.json),this},e.prototype.cancelLastTimerEvent=function(){var t;return t=o.decodeJson(this.data.json),t.pop(),this.data.json=o.encodeJson(t),this},e.prototype.log=function(){return this.set({text:[this.data.header," ",this.data.timeSpent,this.data.log.join("\n")," ",this.data.json," ",this.data.footer].join("\n")}),null!=this.commentId?this.save(null,{method:"PUT"}):this.save().done(function(t){return function(e){return t.commentId=e.id}}(this))},e.prototype._updateJson=function(t){var e;return e=s.request("getTimerTime"),this.data.json=o.updateJson(this.data.json,e,t)},e}(r.Model),e.exports=i},{"./base":55,"./helpers/log":57}],61:[function(t,e,n){"use strict";var o,r,i,s,a,u,l,c,d,p,h=function(t,e){function n(){this.constructor=t}for(var o in e)f.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},f={}.hasOwnProperty;o=t("utils/cache"),r=t("./log"),i=t("utils/notifications"),s=t("entities/pomello/api"),a=t("./helpers/task"),u=t("./base"),l=t("./api"),d=Backbone.Radio.channel("app"),p=Backbone.Radio.channel("settings"),c=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.urlRoot="/cards",e.prototype.params={fields:"name,labels",actions:"commentCard"},e.prototype.initialize=function(){return this._parseTitle(),this._setUpListeners(),this._setPermissions()},e.prototype.onNoteAdded=function(t,e){return this.prefs.keepLog===!0?this.log.addNote(t,e).log():this.prefs.canComment===!0?this._createComment(t,e):i.create("createNoteError",{title:"Could't create note",message:"Comments are disabled on this board"}),this.prefs.trackStats!==!0||"internal"!==t&&"external"!==t||this._sendPomelloEvent({event:"distraction:"+t,details:JSON.stringify({note:e})}),this},e.prototype.onTimerStarted=function(){return this.prefs.keepLog&&this.log.addTimerEvent("start").log(),this},e.prototype.onTimerEnded=function(){var t;return t=this._getCheck(),this.prefs.addChecks&&this._addCheck(t),this.prefs.keepLog&&this.log.addTimerEvent("end").log(),this.prefs.trackStats&&this._sendPomelloEvent({event:"timer:end",details:JSON.stringify({check:t,time:this.startTime-d.request("getTimerTime")})}),this},e.prototype.onTaskFinished=function(){return this.prefs.keepLog&&this.log.addTimerEvent("complete").log(),this.prefs.trackStats&&this._sendPomelloEvent({event:"task:complete"}),this},e.prototype.onTaskVoided=function(t){return null==t&&(t=!1),t===!0&&this.prefs.addChecks&&this._removeLastCheck(),this.prefs.keepLog&&this.log.cancelLastTimerEvent().addTimerEvent("void").log(),this.prefs.trackStats&&this._sendPomelloEvent({event:"timer:void",details:JSON.stringify({check:t===!0&&null!=this.previousCheck?this.previousCheck*-1:0,time:-(this.startTime-d.request("getTimerTime"))})}),this},e.prototype.onTaskCanceled=function(){return this.prefs.keepLog&&this.log.cancelLastTimerEvent().log(),this},e.prototype.moveToList=function(t){var e,n,r;if(n=o.get(["tasks","currentList"]),r=n.tasks,e=n.currentList,t!==e.id)return null!=r&&r.remove(this),this.save({idList:t,pos:p.request("get","completedTaskPosition")},{patch:!0,method:"put",error:function(t){return r.add(t)}})},e.prototype.findOrCreateLog=function(t){var e,n,o,i,s,a;if(null==t&&(t=!0),t===!0&&null!=this.log)return this.log;if(a=d.request("currentUser"),s={cardId:this.id},n=_.where(this.get("actions"),{type:"commentCard"}))for(o=0,i=n.length;o<i;o++)if(e=n[o],e.idMemberCreator===a.id&&/^\*\*Pomello Log\*\*/.test(e.data.text)){s.commentId=e.id,s.text=e.data.text;break}return this.log=new r(s)},e.prototype._setPermissions=function(){var t,e;return e=o.get("currentListConfig").settings,t=o.get("currentBoard").get("prefs"),this.prefs={addChecks:e.addChecks,keepLog:e.keepLog===!0&&"disabled"!==t.comments,trackStats:e.trackStats,canComment:"disabled"!==t.comments}},e.prototype._getCheck=function(){var t,e;return e=d.request("getTimerTime"),t=p.request("get","taskTime"),a.roundToNearestEighth((this.startTime-e)/t)},e.prototype._addCheck=function(t){var e;return this.checks=this.checks+t,this.previousCheck=t,e=a.generatePomelloData(this.checks),this.save({name:e+this.title},{patch:!0,method:"put"})},e.prototype._removeLastCheck=function(){var t;if(null!=this.previousCheck)return this.checks=this.checks-this.previousCheck,t=a.generatePomelloData(this.checks),this.save({name:t+this.title},{patch:!0,method:"put"})},e.prototype._createComment=function(t,e){var n;return n=new l,t=function(){switch(t){case"general":return"Note";case"internal":return"Internal distraction";case"external":return"External interruption"}}(),e.length&&(t+=": "),n.ajax({url:"/cards/"+this.id+"/actions/comments",method:"POST",data:{text:"**"+t+"** "+e}})},e.prototype._sendPomelloEvent=function(t){var e,n,r;return r=new s,n={task_id:this.id,task:this.title,list_id:this.get("idList"),list:o.get("currentList").get("name"),board_id:this.get("idBoard"),board:o.get("currentList").get("nameBoard"),labels:JSON.stringify(this.get("labels"))},e=$.extend(n,t),r.ajax({url:"/events",method:"POST",data:e})},e.prototype._parseTitle=function(){var t;return t=a.parseTitle(this.get("name")),this.checks=t.checks,this.title=t.title,t},e.prototype._setUpListeners=function(){return this.on({"change:name":this._parseTitle,"change:actions":function(){return this.findOrCreateLog(!1)}})},e}(u.Model),e.exports=c},{"./api":54,"./base":55,"./helpers/task":58,"./log":60,"entities/pomello/api":53,"utils/cache":63,"utils/notifications":65}],62:[function(t,e,n){"use strict";var o,r,i,s,a,u,l,c=function(t,e){function n(){this.constructor=t}for(var o in e)d.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;r=t("utils/cache"),s=t("./task"),a=t("./base"),i=t("utils/notifications"),l=Backbone.Radio.channel("entities"),u=function(t){function e(t){e.__super__.constructor.apply(this,arguments),this.listId=t.listId}return c(e,t),e.prototype.url=function(){if(null!=this.listId)return"/lists/"+this.listId+"/cards";throw new Error("[listId] is not defined")},e.prototype.params={fields:"name,labels,idList,idBoard",actions:"commentCard"},e.prototype.model=s,e}(a.Collection),o={getTasks:function(t){return null==t&&(t={}),new Promise(function(e,n){var o,i;return r.has("tasks")&&t.cached===!0?e(r.get("tasks")):(o=t.list||r.get("currentList").id,i=new u({listId:o}),i.fetch().done(function(){return e(r.set("tasks",i))}))})},syncTasks:function(t){var e;if(null==t&&(t={}),e=r.get("tasks"))return e.fetch().done(function(){if(t.silent!==!0)return i.create({message:"Synchronization complete"})})}},l.reply({getTasks:o.getTasks}),l.comply({syncTasks:o.syncTasks}),e.exports=u},{"./base":55,"./task":61,"utils/cache":63,"utils/notifications":65}],63:[function(t,e,n){"use strict";var o;o=function(){function t(){}var e;return e={},t.prototype.has=function(t){return _.has(e,t)},t.prototype.set=function(t,n){var o,r,i;if("object"==typeof t){i=[];for(o in t)r=t[o],i.push(e[o]=r);return i}return e[t]=n},t.prototype.get=function(t){return"object"==typeof t?_.object(t,t.map(function(t){return e[t]})):e[t]},t.prototype.remove=function(t){var n,o,r,i;
if("object"==typeof t){for(i=[],n=0,r=t.length;n<r;n++)o=t[n],i.push(delete e[o]);return i}return delete e[t]},t}(),e.exports=new o},{}],64:[function(t,e,n){"use strict";var o;o=function(){function t(){}return t.prototype.ucfirst=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},t.prototype.encodeParams=function(t){var e,n,o;e=[];for(n in t)o=t[n],e.push(n+"="+encodeURIComponent(o));return e.join("&")},t.prototype.getIndexById=function(t,e){var n,o,r,i;for(o=n=0,i=t.length;n<i;o=++n)if(r=t[o],r.id===e)return o;return!1},t.prototype.getAdjacentIndex=function(t,e,n){return n="next"===n?1:-1,(t.length+(e+n))%t.length},t}(),e.exports=o},{}],65:[function(t,e,n){"use strict";var o;o=function(){function t(){}return t.prototype.defaults={type:"basic",title:chrome.i18n.getMessage("appName"),iconUrl:"images/icon-notification.png"},t.prototype.create=function(t,e,n){return null==n&&(n=5e3),"object"==typeof t&&(n=e||5e3,e=t,t=null),e=_.defaults(e,this.defaults),chrome.notifications.create(t,e,function(t){if(n!==!1)return setTimeout(function(){return chrome.notifications.clear(t)},n)})},t}(),e.exports=new o},{}],66:[function(t,e,n){"use strict";var o;o=function(){function t(){}return t.prototype.get=function(t){return new Promise(function(e,n){var o;return o=t.split(","),chrome.storage.sync.get(o,function(n){return e(o.length>1?n:n[t])})})},t.prototype.set=function(t,e){return new Promise(function(n,o){var r;return null===e?n(chrome.storage.sync.remove(t)):("object"==typeof t?r=t:(r={},r[t]=e),chrome.storage.sync.set(r,function(){return n()}))})},t.prototype.remove=function(t){return this.set(t,null)},t}(),e.exports=new o},{}],67:[function(t,e,n){"use strict";var o;o=function(){function t(){}return t.prototype.create=function(t,e,n,o){var r;return null==n&&(n=800),null==o&&(o=560),r=chrome.app.window.get(t),null!==r?r.focus():chrome.app.window.create(e,{id:t,outerBounds:{width:n,height:o,left:Math.round((screen.availWidth-n)/2),top:Math.round((screen.availHeight-o)/2)}})},t.prototype.get=function(t){return chrome.app.window.get(t)},t}(),e.exports=new o},{}],68:[function(t,e,n){"use strict";function o(){var t=new s.HandlebarsEnvironment;return p.extend(t,s),t.SafeString=u["default"],t.Exception=c["default"],t.Utils=p,t.escapeExpression=p.escapeExpression,t.VM=f,t.template=function(e){return f.template(e,t)},t}var r=function(t){return t&&t.__esModule?t:{"default":t}};n.__esModule=!0;var i=t("./handlebars/base"),s=r(i),a=t("./handlebars/safe-string"),u=r(a),l=t("./handlebars/exception"),c=r(l),d=t("./handlebars/utils"),p=r(d),h=t("./handlebars/runtime"),f=r(h),m=t("./handlebars/no-conflict"),_=r(m),v=o();v.create=o,_["default"](v),v["default"]=v,n["default"]=v,e.exports=n["default"]},{"./handlebars/base":69,"./handlebars/exception":70,"./handlebars/no-conflict":71,"./handlebars/runtime":72,"./handlebars/safe-string":73,"./handlebars/utils":74}],69:[function(t,e,n){"use strict";function o(t,e){this.helpers=t||{},this.partials=e||{},r(this)}function r(t){t.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new c["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')}),t.registerHelper("blockHelperMissing",function(e,n){var o=n.inverse,r=n.fn;if(e===!0)return r(this);if(e===!1||null==e)return o(this);if(f(e))return e.length>0?(n.ids&&(n.ids=[n.name]),t.helpers.each(e,n)):o(this);if(n.data&&n.ids){var s=i(n.data);s.contextPath=u.appendContextPath(n.data.contextPath,n.name),n={data:s}}return r(e,n)}),t.registerHelper("each",function(t,e){function n(e,n,r){l&&(l.key=e,l.index=n,l.first=0===n,l.last=!!r,d&&(l.contextPath=d+e)),a+=o(t[e],{data:l,blockParams:u.blockParams([t[e],e],[d+e,null])})}if(!e)throw new c["default"]("Must pass iterator to #each");var o=e.fn,r=e.inverse,s=0,a="",l=void 0,d=void 0;if(e.data&&e.ids&&(d=u.appendContextPath(e.data.contextPath,e.ids[0])+"."),m(t)&&(t=t.call(this)),e.data&&(l=i(e.data)),t&&"object"==typeof t)if(f(t))for(var p=t.length;s<p;s++)n(s,s,s===t.length-1);else{var h=void 0;for(var _ in t)t.hasOwnProperty(_)&&(h&&n(h,s-1),h=_,s++);h&&n(h,s-1,!0)}return 0===s&&(a=r(this)),a}),t.registerHelper("if",function(t,e){return m(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||u.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),t.registerHelper("with",function(t,e){m(t)&&(t=t.call(this));var n=e.fn;if(u.isEmpty(t))return e.inverse(this);if(e.data&&e.ids){var o=i(e.data);o.contextPath=u.appendContextPath(e.data.contextPath,e.ids[0]),e={data:o}}return n(t,e)}),t.registerHelper("log",function(e,n){var o=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(o,e)}),t.registerHelper("lookup",function(t,e){return t&&t[e]})}function i(t){var e=u.extend({},t);return e._parent=t,e}var s=function(t){return t&&t.__esModule?t:{"default":t}};n.__esModule=!0,n.HandlebarsEnvironment=o,n.createFrame=i;var a=t("./utils"),u=s(a),l=t("./exception"),c=s(l),d="3.0.1";n.VERSION=d;var p=6;n.COMPILER_REVISION=p;var h={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};n.REVISION_CHANGES=h;var f=u.isArray,m=u.isFunction,_=u.toString,v="[object Object]";o.prototype={constructor:o,logger:y,log:g,registerHelper:function(t,e){if(_.call(t)===v){if(e)throw new c["default"]("Arg not supported with multiple helpers");u.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(_.call(t)===v)u.extend(this.partials,t);else{if("undefined"==typeof e)throw new c["default"]("Attempting to register a partial as undefined");this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]}};var y={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function(t,e){if("undefined"!=typeof console&&y.level<=t){var n=y.methodMap[t];(console[n]||console.log).call(console,e)}}};n.logger=y;var g=y.log;n.log=g},{"./exception":70,"./utils":74}],70:[function(t,e,n){"use strict";function o(t,e){var n=e&&e.loc,i=void 0,s=void 0;n&&(i=n.start.line,s=n.start.column,t+=" - "+i+":"+s);for(var a=Error.prototype.constructor.call(this,t),u=0;u<r.length;u++)this[r[u]]=a[r[u]];Error.captureStackTrace&&Error.captureStackTrace(this,o),n&&(this.lineNumber=i,this.column=s)}n.__esModule=!0;var r=["description","fileName","lineNumber","message","name","number","stack"];o.prototype=new Error,n["default"]=o,e.exports=n["default"]},{}],71:[function(t,e,n){(function(t){"use strict";n.__esModule=!0,n["default"]=function(e){var n="undefined"!=typeof t?t:window,o=n.Handlebars;e.noConflict=function(){n.Handlebars===e&&(n.Handlebars=o)}},e.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],72:[function(t,e,n){"use strict";function o(t){var e=t&&t[0]||1,n=m.COMPILER_REVISION;if(e!==n){if(e<n){var o=m.REVISION_CHANGES[n],r=m.REVISION_CHANGES[e];throw new f["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+o+") or downgrade your runtime to an older version ("+r+").")}throw new f["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function r(t,e){function n(n,o,r){r.hash&&(o=p.extend({},o,r.hash)),n=e.VM.resolvePartial.call(this,n,o,r);var i=e.VM.invokePartial.call(this,n,o,r);if(null==i&&e.compile&&(r.partials[r.name]=e.compile(n,t.compilerOptions,e),i=r.partials[r.name](o,r)),null!=i){if(r.indent){for(var s=i.split("\n"),a=0,u=s.length;a<u&&(s[a]||a+1!==u);a++)s[a]=r.indent+s[a];i=s.join("\n")}return i}throw new f["default"]("The partial "+r.name+" could not be compiled when running in runtime-only mode")}function o(e){var n=void 0===arguments[1]?{}:arguments[1],i=n.data;o._setup(n),!n.partial&&t.useData&&(i=l(e,i));var s=void 0,a=t.useBlockParams?[]:void 0;return t.useDepths&&(s=n.depths?[e].concat(n.depths):[e]),t.main.call(r,e,r.helpers,r.partials,i,a,s)}if(!e)throw new f["default"]("No environment passed to template");if(!t||!t.main)throw new f["default"]("Unknown template object: "+typeof t);e.VM.checkRevision(t.compiler);var r={strict:function(t,e){if(!(e in t))throw new f["default"]('"'+e+'" not defined in '+t);return t[e]},lookup:function(t,e){for(var n=t.length,o=0;o<n;o++)if(t[o]&&null!=t[o][e])return t[o][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:p.escapeExpression,invokePartial:n,fn:function(e){return t[e]},programs:[],program:function(t,e,n,o,r){var s=this.programs[t],a=this.fn(t);return e||r||o||n?s=i(this,t,a,e,n,o,r):s||(s=this.programs[t]=i(this,t,a)),s},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n=p.extend({},e,t)),n},noop:e.VM.noop,compilerInfo:t.compiler};return o.isTop=!0,o._setup=function(n){n.partial?(r.helpers=n.helpers,r.partials=n.partials):(r.helpers=r.merge(n.helpers,e.helpers),t.usePartial&&(r.partials=r.merge(n.partials,e.partials)))},o._child=function(e,n,o,s){if(t.useBlockParams&&!o)throw new f["default"]("must pass block params");if(t.useDepths&&!s)throw new f["default"]("must pass parent depths");return i(r,e,t[e],n,0,o,s)},o}function i(t,e,n,o,r,i,s){function a(e){var r=void 0===arguments[1]?{}:arguments[1];return n.call(t,e,t.helpers,t.partials,r.data||o,i&&[r.blockParams].concat(i),s&&[e].concat(s))}return a.program=e,a.depth=s?s.length:0,a.blockParams=r||0,a}function s(t,e,n){return t?t.call||n.name||(n.name=t,t=n.partials[t]):t=n.partials[n.name],t}function a(t,e,n){if(n.partial=!0,void 0===t)throw new f["default"]("The partial "+n.name+" could not be found");if(t instanceof Function)return t(e,n)}function u(){return""}function l(t,e){return e&&"root"in e||(e=e?m.createFrame(e):{},e.root=t),e}var c=function(t){return t&&t.__esModule?t:{"default":t}};n.__esModule=!0,n.checkRevision=o,n.template=r,n.wrapProgram=i,n.resolvePartial=s,n.invokePartial=a,n.noop=u;var d=t("./utils"),p=c(d),h=t("./exception"),f=c(h),m=t("./base")},{"./base":69,"./exception":70,"./utils":74}],73:[function(t,e,n){"use strict";function o(t){this.string=t}n.__esModule=!0,o.prototype.toString=o.prototype.toHTML=function(){return""+this.string},n["default"]=o,e.exports=n["default"]},{}],74:[function(t,e,n){"use strict";function o(t){return c[t]}function r(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}function i(t,e){for(var n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1}function s(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return p.test(t)?t.replace(d,o):t}function a(t){return!t&&0!==t||!(!m(t)||0!==t.length)}function u(t,e){return t.path=e,t}function l(t,e){return(t?t+".":"")+e}n.__esModule=!0,n.extend=r,n.indexOf=i,n.escapeExpression=s,n.isEmpty=a,n.blockParams=u,n.appendContextPath=l;var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},d=/[&<>"'`]/g,p=/[&<>"'`]/,h=Object.prototype.toString;n.toString=h;var f=function(t){return"function"==typeof t};f(/x/)&&(n.isFunction=f=function(t){return"function"==typeof t&&"[object Function]"===h.call(t)});var f;n.isFunction=f;var m=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===h.call(t)};n.isArray=m},{}],75:[function(t,e,n){e.exports=t("./dist/cjs/handlebars.runtime")["default"]},{"./dist/cjs/handlebars.runtime":68}],76:[function(t,e,n){e.exports=t("handlebars/runtime")["default"]},{"handlebars/runtime":75}],77:[function(t,e,n){(function(t){!function(){"use strict";var e=function(){this.init()};e.prototype={init:function(){var t=this||o;return t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.mobileAutoEnable=!0,t._setup(),t},volume:function(t){var e=this||o;if(t=parseFloat(t),e.ctx||d(),"undefined"!=typeof t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&(e.masterGain.gain.value=t);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var r=e._howls[n]._getSoundIds(),i=0;i<r.length;i++){var s=e._howls[n]._soundById(r[i]);s&&s._node&&(s._node.volume=s._volume*t)}return e}return e._volume},mute:function(t){var e=this||o;e.ctx||d(),e._muted=t,e.usingWebAudio&&(e.masterGain.gain.value=t?0:e._volume);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var r=e._howls[n]._getSoundIds(),i=0;i<r.length;i++){var s=e._howls[n]._soundById(r[i]);s&&s._node&&(s._node.muted=!!t||s._muted)}return e},unload:function(){for(var t=this||o,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&"undefined"!=typeof t.ctx.close&&(t.ctx.close(),t.ctx=null,d()),t},codecs:function(t){return(this||o)._codecs[t]},_setup:function(){var t=this||o;return t.state=t.ctx?t.ctx.state||"running":"running",t._autoSuspend(),t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||o,e="undefined"!=typeof Audio?new Audio:null;if(!e||"function"!=typeof e.canPlayType)return t;var n=e.canPlayType("audio/mpeg;").replace(/^no$/,""),r=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),i=r&&parseInt(r[0].split("/")[1],10)<33;return t._codecs={mp3:!(i||!n&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,"")},t},_enableMobileAudio:function(){var t=this||o,e=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(t._navigator&&t._navigator.userAgent),n=!!("ontouchend"in window||t._navigator&&t._navigator.maxTouchPoints>0||t._navigator&&t._navigator.msMaxTouchPoints>0);if(!t._mobileEnabled&&t.ctx&&(e||n)){t._mobileEnabled=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var r=function(){var e=t.ctx.createBufferSource();e.buffer=t._scratchBuffer,e.connect(t.ctx.destination),"undefined"==typeof e.start?e.noteOn(0):e.start(0),e.onended=function(){e.disconnect(0),t._mobileEnabled=!0,t.mobileAutoEnable=!1,document.removeEventListener("touchend",r,!0)}};return document.addEventListener("touchend",r,!0),t}},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&"undefined"!=typeof t.ctx.suspend&&o.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var n=0;n<t._howls[e]._sounds.length;n++)if(!t._howls[e]._sounds[n]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){t.autoSuspend&&(t._suspendTimer=null,t.state="suspending",t.ctx.suspend().then(function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())}))},3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&"undefined"!=typeof t.ctx.resume&&o.usingWebAudio)return"running"===t.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state?(t.state="resuming",t.ctx.resume().then(function(){t.state="running"}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var o=new e,r=function(t){var e=this;return t.src&&0!==t.src.length?void e.init(t):void console.error("An array of source files must be passed with any new Howl.")};r.prototype={init:function(t){var e=this;return o.ctx||d(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._webAudio=o.usingWebAudio&&!e._html5,"undefined"!=typeof o.ctx&&o.ctx&&o.mobileAutoEnable&&o._enableMobileAudio(),o._howls.push(e),e._preload&&e.load(),e},load:function(){var t=this,e=null;if(o.noAudio)return void t._emit("loaderror",null,"No audio support.");"string"==typeof t._src&&(t._src=[t._src]);for(var n=0;n<t._src.length;n++){var r,s;if(t._format&&t._format[n])r=t._format[n];else{if(s=t._src[n],"string"!=typeof s){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}r=/^data:audio\/([^;,]+);/i.exec(s),r||(r=/\.([^.]+)$/.exec(s.split("?",1)[0])),r&&(r=r[1].toLowerCase())}if(o.codecs(r)){e=t._src[n];break}}return e?(t._src=e,t._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new i(t),t._webAudio&&a(t),t):void t._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(t,e){var n=this,r=null;if("number"==typeof t)r=t,t=null;else{if("string"==typeof t&&"loaded"===n._state&&!n._sprite[t])return null;if("undefined"==typeof t){t="__default";for(var i=0,s=0;s<n._sounds.length;s++)n._sounds[s]._paused&&!n._sounds[s]._ended&&(i++,r=n._sounds[s]._id);1===i?t=null:r=null}}var a=r?n._soundById(r):n._inactiveSound();if(!a)return null;if(r&&!t&&(t=a._sprite||"__default"),"loaded"!==n._state&&!n._sprite[t])return n._queue.push({event:"play",action:function(){n.play(n._soundById(a._id)?a._id:void 0)}}),a._id;if(r&&!a._paused)return e||setTimeout(function(){n._emit("play",a._id)},0),a._id;n._webAudio&&o._autoResume();var u=a._seek>0?a._seek:n._sprite[t][0]/1e3,l=(n._sprite[t][0]+n._sprite[t][1])/1e3-u,c=1e3*l/Math.abs(a._rate);a._paused=!1,a._ended=!1,a._sprite=t,a._seek=u,a._start=n._sprite[t][0]/1e3,a._stop=(n._sprite[t][0]+n._sprite[t][1])/1e3,a._loop=!(!a._loop&&!n._sprite[t][2]);var d=a._node;if(n._webAudio){var p=function(){n._refreshBuffer(a);var t=a._muted||n._muted?0:a._volume;d.gain.setValueAtTime(t,o.ctx.currentTime),a._playStart=o.ctx.currentTime,"undefined"==typeof d.bufferSource.start?a._loop?d.bufferSource.noteGrainOn(0,u,86400):d.bufferSource.noteGrainOn(0,u,l):a._loop?d.bufferSource.start(0,u,86400):d.bufferSource.start(0,u,l),c!==1/0&&(n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),c)),e||setTimeout(function(){n._emit("play",a._id)},0)};"loaded"===n._state?p():(n.once("load",p,a._id),n._clearTimer(a._id))}else{var h=function(){d.currentTime=u,d.muted=a._muted||n._muted||o._muted||d.muted,d.volume=a._volume*o.volume(),d.playbackRate=a._rate,setTimeout(function(){d.play(),c!==1/0&&(n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),c)),e||n._emit("play",a._id)},0)},f="loaded"===n._state&&(window&&window.ejecta||!d.readyState&&o._navigator.isCocoonJS);if(4===d.readyState||f)h();else{var m=function(){h(),d.removeEventListener(o._canPlayEvent,m,!1)};d.addEventListener(o._canPlayEvent,m,!1),n._clearTimer(a._id)}}return a._id},pause:function(t){var e=this;if("loaded"!==e._state)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var n=e._getSoundIds(t),o=0;o<n.length;o++){e._clearTimer(n[o]);var r=e._soundById(n[o]);if(r&&!r._paused){if(r._seek=e.seek(n[o]),r._rateSeek=0,r._paused=!0,e._stopFade(n[o]),r._node)if(e._webAudio){if(!r._node.bufferSource)return e;"undefined"==typeof r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),e._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||e._emit("pause",r._id)}}return e},stop:function(t,e){var n=this;if("loaded"!==n._state)return n._queue.push({event:"stop",action:function(){n.stop(t)}}),n;for(var o=n._getSoundIds(t),r=0;r<o.length;r++){n._clearTimer(o[r]);var i=n._soundById(o[r]);if(i&&!i._paused&&(i._seek=i._start||0,i._rateSeek=0,i._paused=!0,i._ended=!0,n._stopFade(o[r]),i._node))if(n._webAudio){if(!i._node.bufferSource)return n;"undefined"==typeof i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),n._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||(i._node.currentTime=i._start||0,i._node.pause());i&&!e&&n._emit("stop",i._id)}return n},mute:function(t,e){var n=this;if("loaded"!==n._state)return n._queue.push({event:"mute",action:function(){n.mute(t,e)}}),n;if("undefined"==typeof e){if("boolean"!=typeof t)return n._muted;n._muted=t}for(var r=n._getSoundIds(e),i=0;i<r.length;i++){var s=n._soundById(r[i]);s&&(s._muted=t,n._webAudio&&s._node?s._node.gain.setValueAtTime(t?0:s._volume,o.ctx.currentTime):s._node&&(s._node.muted=!!o._muted||t),n._emit("mute",s._id))}return n},volume:function(){var t,e,n=this,r=arguments;if(0===r.length)return n._volume;if(1===r.length){var i=n._getSoundIds(),s=i.indexOf(r[0]);s>=0?e=parseInt(r[0],10):t=parseFloat(r[0])}else r.length>=2&&(t=parseFloat(r[0]),e=parseInt(r[1],10));var a;if(!("undefined"!=typeof t&&t>=0&&t<=1))return a=e?n._soundById(e):n._sounds[0],a?a._volume:0;if("loaded"!==n._state)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,r)}}),n;"undefined"==typeof e&&(n._volume=t),e=n._getSoundIds(e);for(var u=0;u<e.length;u++)a=n._soundById(e[u]),a&&(a._volume=t,r[2]||n._stopFade(e[u]),n._webAudio&&a._node&&!a._muted?a._node.gain.setValueAtTime(t,o.ctx.currentTime):a._node&&!a._muted&&(a._node.volume=t*o.volume()),n._emit("volume",a._id));return n},fade:function(t,e,n,r){var i=this,s=Math.abs(t-e),a=t>e?"out":"in",u=s/.01,l=n/u;if("loaded"!==i._state)return i._queue.push({event:"fade",action:function(){i.fade(t,e,n,r)}}),i;i.volume(t,r);for(var c=i._getSoundIds(r),d=0;d<c.length;d++){var p=i._soundById(c[d]);if(p){if(r||i._stopFade(c[d]),i._webAudio&&!p._muted){var h=o.ctx.currentTime,f=h+n/1e3;p._volume=t,p._node.gain.setValueAtTime(t,h),p._node.gain.linearRampToValueAtTime(e,f)}var m=t;p._interval=setInterval(function(t,n){m+="in"===a?.01:-.01,m=Math.max(0,m),m=Math.min(1,m),m=Math.round(100*m)/100,i._webAudio?("undefined"==typeof r&&(i._volume=m),n._volume=m):i.volume(m,t,!0),m===e&&(clearInterval(n._interval),n._interval=null,i.volume(m,t),i._emit("fade",t))}.bind(i,c[d],p),l)}}return i},_stopFade:function(t){var e=this,n=e._soundById(t);return n&&n._interval&&(e._webAudio&&n._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(n._interval),n._interval=null,e._emit("fade",t)),e},loop:function(){var t,e,n,o=this,r=arguments;if(0===r.length)return o._loop;if(1===r.length){if("boolean"!=typeof r[0])return n=o._soundById(parseInt(r[0],10)),!!n&&n._loop;t=r[0],o._loop=t}else 2===r.length&&(t=r[0],e=parseInt(r[1],10));for(var i=o._getSoundIds(e),s=0;s<i.length;s++)n=o._soundById(i[s]),n&&(n._loop=t,o._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=t));return o},rate:function(){var t,e,n=this,r=arguments;if(0===r.length)e=n._sounds[0]._id;else if(1===r.length){var i=n._getSoundIds(),s=i.indexOf(r[0]);s>=0?e=parseInt(r[0],10):t=parseFloat(r[0])}else 2===r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10));var a;if("number"!=typeof t)return a=n._soundById(e),a?a._rate:n._rate;if("loaded"!==n._state)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,r)}}),n;"undefined"==typeof e&&(n._rate=t),e=n._getSoundIds(e);for(var u=0;u<e.length;u++)if(a=n._soundById(e[u])){a._rateSeek=n.seek(e[u]),a._playStart=n._webAudio?o.ctx.currentTime:a._playStart,a._rate=t,n._webAudio&&a._node&&a._node.bufferSource?a._node.bufferSource.playbackRate.value=t:a._node&&(a._node.playbackRate=t);var l=n.seek(e[u]),c=(n._sprite[a._sprite][0]+n._sprite[a._sprite][1])/1e3-l,d=1e3*c/Math.abs(a._rate);!n._endTimers[e[u]]&&a._paused||(n._clearTimer(e[u]),n._endTimers[e[u]]=setTimeout(n._ended.bind(n,a),d)),n._emit("rate",a._id)}return n},seek:function(){var t,e,n=this,r=arguments;if(0===r.length)e=n._sounds[0]._id;else if(1===r.length){var i=n._getSoundIds(),s=i.indexOf(r[0]);s>=0?e=parseInt(r[0],10):(e=n._sounds[0]._id,t=parseFloat(r[0]))}else 2===r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10));if("undefined"==typeof e)return n;if("loaded"!==n._state)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var a=n._soundById(e);if(a){if(!("number"==typeof t&&t>=0)){if(n._webAudio){var u=n.playing(e)?o.ctx.currentTime-a._playStart:0,l=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(l+u*Math.abs(a._rate))}return a._node.currentTime}var c=n.playing(e);c&&n.pause(e,!0),a._seek=t,a._ended=!1,n._clearTimer(e),c&&n.play(e,!0),!n._webAudio&&a._node&&(a._node.currentTime=t),n._emit("seek",e)}return n},playing:function(t){var e=this;if("number"==typeof t){var n=e._soundById(t);return!!n&&!n._paused}for(var o=0;o<e._sounds.length;o++)if(!e._sounds[o]._paused)return!0;return!1},duration:function(t){var e=this,n=e._duration,o=e._soundById(t);return o&&(n=e._sprite[o._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,n=0;n<e.length;n++){e[n]._paused||(t.stop(e[n]._id),t._emit("end",e[n]._id)),t._webAudio||(e[n]._node.src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=",e[n]._node.removeEventListener("error",e[n]._errorFn,!1),e[n]._node.removeEventListener(o._canPlayEvent,e[n]._loadFn,!1)),delete e[n]._node,t._clearTimer(e[n]._id);var r=o._howls.indexOf(t);r>=0&&o._howls.splice(r,1)}var i=!0;for(n=0;n<o._howls.length;n++)if(o._howls[n]._src===t._src){i=!1;break}return s&&i&&delete s[t._src],t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,n,o){var r=this,i=r["_on"+t];return"function"==typeof e&&i.push(o?{id:n,fn:e,once:o}:{id:n,fn:e}),r},off:function(t,e,n){var o=this,r=o["_on"+t],i=0;if(e){for(i=0;i<r.length;i++)if(e===r[i].fn&&n===r[i].id){r.splice(i,1);break}}else if(t)o["_on"+t]=[];else{var s=Object.keys(o);for(i=0;i<s.length;i++)0===s[i].indexOf("_on")&&Array.isArray(o[s[i]])&&(o[s[i]]=[])}return o},once:function(t,e,n){var o=this;return o.on(t,e,n,1),o},_emit:function(t,e,n){for(var o=this,r=o["_on"+t],i=r.length-1;i>=0;i--)r[i].id&&r[i].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,n)}.bind(o,r[i].fn),0),r[i].once&&o.off(t,r[i].fn,r[i].id));return o},_loadQueue:function(){var t=this;if(t._queue.length>0){var e=t._queue[0];t.once(e.event,function(){t._queue.shift(),t._loadQueue()}),e.action()}return t},_ended:function(t){var e=this,n=t._sprite,r=!(!t._loop&&!e._sprite[n][2]);if(e._emit("end",t._id),!e._webAudio&&r&&e.stop(t._id,!0).play(t._id),e._webAudio&&r){e._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=o.ctx.currentTime;var i=1e3*(t._stop-t._start)/Math.abs(t._rate);e._endTimers[t._id]=setTimeout(e._ended.bind(e,t),i)}return e._webAudio&&!r&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,e._clearTimer(t._id),e._cleanBuffer(t._node),o._autoSuspend()),e._webAudio||r||e.stop(t._id),e},_clearTimer:function(t){var e=this;return e._endTimers[t]&&(clearTimeout(e._endTimers[t]),delete e._endTimers[t]),e},_soundById:function(t){for(var e=this,n=0;n<e._sounds.length;n++)if(t===e._sounds[n]._id)return e._sounds[n];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new i(t)},_drain:function(){var t=this,e=t._pool,n=0,o=0;if(!(t._sounds.length<e)){for(o=0;o<t._sounds.length;o++)t._sounds[o]._ended&&n++;for(o=t._sounds.length-1;o>=0;o--){if(n<=e)return;t._sounds[o]._ended&&(t._webAudio&&t._sounds[o]._node&&t._sounds[o]._node.disconnect(0),t._sounds.splice(o,1),n--)}}},_getSoundIds:function(t){var e=this;if("undefined"==typeof t){for(var n=[],o=0;o<e._sounds.length;o++)n.push(e._sounds[o]._id);return n}return[t]},_refreshBuffer:function(t){var e=this;return t._node.bufferSource=o.ctx.createBufferSource(),t._node.bufferSource.buffer=s[e._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop),t._node.bufferSource.playbackRate.value=t._rate,e},_cleanBuffer:function(t){var e=this;if(e._scratchBuffer){t.bufferSource.onended=null,t.bufferSource.disconnect(0);try{t.bufferSource.buffer=e._scratchBuffer}catch(n){}}return t.bufferSource=null,e}};var i=function(t){this._parent=t,this.init()};i.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._muted=e._muted,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=Math.round(Date.now()*Math.random()),e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,n=o._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node="undefined"==typeof o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),t._node.gain.setValueAtTime(n,o.ctx.currentTime),t._node.paused=!0,t._node.connect(o.masterGain)):(t._node=new Audio,t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(o._canPlayEvent,t._loadFn,!1),t._node.src=e._src,t._node.preload="auto",t._node.volume=n*o.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._muted=e._muted,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=Math.round(Date.now()*Math.random()),t},_errorListener:function(){var t=this;t._node.error&&4===t._node.error.code&&(o.noAudio=!0),t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorListener,!1)},_loadListener:function(){var t=this,e=t._parent;e._duration=Math.ceil(10*t._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),e._autoplay&&e.play(),t._node.removeEventListener(o._canPlayEvent,t._loadFn,!1)}};var s={},a=function(t){var e=t._src;if(s[e])return t._duration=s[e].duration,void c(t);if(/^data:[^;]+;base64,/.test(e)){for(var n=atob(e.split(",")[1]),o=new Uint8Array(n.length),r=0;r<n.length;++r)o[r]=n.charCodeAt(r);l(o.buffer,t)}else{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){var e=(i.status+"")[0];return"0"!==e&&"2"!==e&&"3"!==e?void t._emit("loaderror",null,"Failed loading audio file with status: "+i.status+"."):void l(i.response,t)},i.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete s[e],t.load())},u(i)}},u=function(t){try{t.send()}catch(e){t.onerror()}},l=function(t,e){o.ctx.decodeAudioData(t,function(t){t&&e._sounds.length>0&&(s[e._src]=t,c(e,t))},function(){e._emit("loaderror",null,"Decoding audio data failed.")})},c=function(t,e){e&&!t._duration&&(t._duration=e.duration),
0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),t._autoplay&&t.play()},d=function(){o.noAudio=!1;try{"undefined"!=typeof AudioContext?o.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch(t){o.usingWebAudio=!1}if(!o.usingWebAudio)if("undefined"!=typeof Audio)try{var e=new Audio;"undefined"==typeof e.oncanplaythrough&&(o._canPlayEvent="canplay")}catch(t){o.noAudio=!0}else o.noAudio=!0;try{var e=new Audio;e.muted&&(o.noAudio=!0)}catch(t){}var n=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),r=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=r?parseInt(r[1],10):null;if(n&&i&&i<9){var s=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());(o._navigator&&o._navigator.standalone&&!s||o._navigator&&!o._navigator.standalone&&!s)&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain="undefined"==typeof o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.value=1,o.masterGain.connect(o.ctx.destination)),o._setup()};"function"==typeof define&&define.amd&&define([],function(){return{Howler:o,Howl:r}}),"undefined"!=typeof n&&(n.Howler=o,n.Howl=r),"undefined"!=typeof window?(window.HowlerGlobal=e,window.Howler=o,window.Howl=r,window.Sound=i):"undefined"!=typeof t&&(t.HowlerGlobal=e,t.Howler=o,t.Howl=r,t.Sound=i)}(),function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var n=e._howls.length-1;n>=0;n--)e._howls[n].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,n){var o=this;return o.ctx&&o.ctx.listener?(e="number"!=typeof e?o._pos[1]:e,n="number"!=typeof n?o._pos[2]:n,"number"!=typeof t?o._pos:(o._pos=[t,e,n],o.ctx.listener.setPosition(o._pos[0],o._pos[1],o._pos[2]),o)):o},HowlerGlobal.prototype.orientation=function(t,e,n,o,r,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;var a=s._orientation;return e="number"!=typeof e?a[1]:e,n="number"!=typeof n?a[2]:n,o="number"!=typeof o?a[3]:o,r="number"!=typeof r?a[4]:r,i="number"!=typeof i?a[5]:i,"number"!=typeof t?a:(s._orientation=[t,e,n,o,r,i],s.ctx.listener.setOrientation(t,e,n,o,r,i),s)},Howl.prototype.init=function(t){return function(e){var n=this;return n._orientation=e.orientation||[1,0,0],n._stereo=e.stereo||null,n._pos=e.pos||null,n._pannerAttr={coneInnerAngle:"undefined"!=typeof e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:"undefined"!=typeof e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:"undefined"!=typeof e.coneOuterGain?e.coneOuterGain:0,distanceModel:"undefined"!=typeof e.distanceModel?e.distanceModel:"inverse",maxDistance:"undefined"!=typeof e.maxDistance?e.maxDistance:1e4,panningModel:"undefined"!=typeof e.panningModel?e.panningModel:"HRTF",refDistance:"undefined"!=typeof e.refDistance?e.refDistance:1,rolloffFactor:"undefined"!=typeof e.rolloffFactor?e.rolloffFactor:1},n._onstereo=e.onstereo?[{fn:e.onstereo}]:[],n._onpos=e.onpos?[{fn:e.onpos}]:[],n._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}}(Howl.prototype.init),Howl.prototype.stereo=function(e,n){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"stereo",action:function(){o.stereo(e,n)}}),o;var r="undefined"==typeof Howler.ctx.createStereoPanner?"spatial":"stereo";if("undefined"==typeof n){if("number"!=typeof e)return o._stereo;o._stereo=e,o._pos=[e,0,0]}for(var i=o._getSoundIds(n),s=0;s<i.length;s++){var a=o._soundById(i[s]);if(a){if("number"!=typeof e)return a._stereo;a._stereo=e,a._pos=[e,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||t(a,r),"spatial"===r?a._panner.setPosition(e,0,0):a._panner.pan.value=e),o._emit("stereo",a._id)}}return o},Howl.prototype.pos=function(e,n,o,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(e,n,o,r)}}),i;if(n="number"!=typeof n?0:n,o="number"!=typeof o?-.5:o,"undefined"==typeof r){if("number"!=typeof e)return i._pos;i._pos=[e,n,o]}for(var s=i._getSoundIds(r),a=0;a<s.length;a++){var u=i._soundById(s[a]);if(u){if("number"!=typeof e)return u._pos;u._pos=[e,n,o],u._node&&(u._panner&&!u._panner.pan||t(u,"spatial"),u._panner.setPosition(e,n,o)),i._emit("pos",u._id)}}return i},Howl.prototype.orientation=function(e,n,o,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(e,n,o,r)}}),i;if(n="number"!=typeof n?i._orientation[1]:n,o="number"!=typeof o?i._orientation[2]:o,"undefined"==typeof r){if("number"!=typeof e)return i._orientation;i._orientation=[e,n,o]}for(var s=i._getSoundIds(r),a=0;a<s.length;a++){var u=i._soundById(s[a]);if(u){if("number"!=typeof e)return u._orientation;u._orientation=[e,n,o],u._node&&(u._panner||(u._pos||(u._pos=i._pos||[0,0,-.5]),t(u,"spatial")),u._panner.setOrientation(e,n,o)),i._emit("orientation",u._id)}}return i},Howl.prototype.pannerAttr=function(){var e,n,o,r=this,i=arguments;if(!r._webAudio)return r;if(0===i.length)return r._pannerAttr;if(1===i.length){if("object"!=typeof i[0])return o=r._soundById(parseInt(i[0],10)),o?o._pannerAttr:r._pannerAttr;e=i[0],"undefined"==typeof n&&(r._pannerAttr={coneInnerAngle:"undefined"!=typeof e.coneInnerAngle?e.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:"undefined"!=typeof e.coneOuterAngle?e.coneOuterAngle:r._coneOuterAngle,coneOuterGain:"undefined"!=typeof e.coneOuterGain?e.coneOuterGain:r._coneOuterGain,distanceModel:"undefined"!=typeof e.distanceModel?e.distanceModel:r._distanceModel,maxDistance:"undefined"!=typeof e.maxDistance?e.maxDistance:r._maxDistance,panningModel:"undefined"!=typeof e.panningModel?e.panningModel:r._panningModel,refDistance:"undefined"!=typeof e.refDistance?e.refDistance:r._refDistance,rolloffFactor:"undefined"!=typeof e.rolloffFactor?e.rolloffFactor:r._rolloffFactor})}else 2===i.length&&(e=i[0],n=parseInt(i[1],10));for(var s=r._getSoundIds(n),a=0;a<s.length;a++)if(o=r._soundById(s[a])){var u=o._pannerAttr;u={coneInnerAngle:"undefined"!=typeof e.coneInnerAngle?e.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:"undefined"!=typeof e.coneOuterAngle?e.coneOuterAngle:u.coneOuterAngle,coneOuterGain:"undefined"!=typeof e.coneOuterGain?e.coneOuterGain:u.coneOuterGain,distanceModel:"undefined"!=typeof e.distanceModel?e.distanceModel:u.distanceModel,maxDistance:"undefined"!=typeof e.maxDistance?e.maxDistance:u.maxDistance,panningModel:"undefined"!=typeof e.panningModel?e.panningModel:u.panningModel,refDistance:"undefined"!=typeof e.refDistance?e.refDistance:u.refDistance,rolloffFactor:"undefined"!=typeof e.rolloffFactor?e.rolloffFactor:u.rolloffFactor};var l=o._panner;l?(l.coneInnerAngle=u.coneInnerAngle,l.coneOuterAngle=u.coneOuterAngle,l.coneOuterGain=u.coneOuterGain,l.distanceModel=u.distanceModel,l.maxDistance=u.maxDistance,l.panningModel=u.panningModel,l.refDistance=u.refDistance,l.rolloffFactor=u.rolloffFactor):(o._pos||(o._pos=r._pos||[0,0,-.5]),t(o,"spatial"))}return r},Sound.prototype.init=function(t){return function(){var e=this,n=e._parent;e._orientation=n._orientation,e._stereo=n._stereo,e._pos=n._pos,e._pannerAttr=n._pannerAttr,t.call(this),e._stereo?n.stereo(e._stereo):e._pos&&n.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this,n=e._parent;return e._orientation=n._orientation,e._pos=n._pos,e._pannerAttr=n._pannerAttr,t.call(this)}}(Sound.prototype.reset);var t=function(t,e){e=e||"spatial","spatial"===e?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.panningModel=t._pannerAttr.panningModel,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.value=t._stereo),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id)}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],78:[function(t,e,n){!function(t,o){"object"==typeof n&&"undefined"!=typeof e?e.exports=o():"function"==typeof define&&define.amd?define(o):t.moment=o()}(this,function(){"use strict";function n(){return _o.apply(null,arguments)}function o(t){_o=t}function r(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function i(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function s(t){var e;for(e in t)return!1;return!0}function a(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function u(t,e){var n,o=[];for(n=0;n<t.length;++n)o.push(e(t[n],n));return o}function l(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function c(t,e){for(var n in e)l(e,n)&&(t[n]=e[n]);return l(e,"toString")&&(t.toString=e.toString),l(e,"valueOf")&&(t.valueOf=e.valueOf),t}function d(t,e,n,o){return ye(t,e,n,o,!0).utc()}function p(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function h(t){return null==t._pf&&(t._pf=p()),t._pf}function f(t){if(null==t._isValid){var e=h(t),n=vo.call(e.parsedDateParts,function(t){return null!=t}),o=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(o=o&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return o;t._isValid=o}return t._isValid}function m(t){var e=d(NaN);return null!=t?c(h(e),t):h(e).userInvalidated=!0,e}function _(t){return void 0===t}function v(t,e){var n,o,r;if(_(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),_(e._i)||(t._i=e._i),_(e._f)||(t._f=e._f),_(e._l)||(t._l=e._l),_(e._strict)||(t._strict=e._strict),_(e._tzm)||(t._tzm=e._tzm),_(e._isUTC)||(t._isUTC=e._isUTC),_(e._offset)||(t._offset=e._offset),_(e._pf)||(t._pf=h(e)),_(e._locale)||(t._locale=e._locale),yo.length>0)for(n in yo)o=yo[n],r=e[o],_(r)||(t[o]=r);return t}function y(t){v(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),go===!1&&(go=!0,n.updateOffset(this),go=!1)}function g(t){return t instanceof y||null!=t&&null!=t._isAMomentObject}function w(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function k(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=w(e)),n}function x(t,e,n){var o,r=Math.min(t.length,e.length),i=Math.abs(t.length-e.length),s=0;for(o=0;o<r;o++)(n&&t[o]!==e[o]||!n&&k(t[o])!==k(e[o]))&&s++;return s+i}function b(t){n.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function T(t,e){var o=!0;return c(function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,t),o){for(var r,i=[],s=0;s<arguments.length;s++){if(r="","object"==typeof arguments[s]){r+="\n["+s+"] ";for(var a in arguments[0])r+=a+": "+arguments[0][a]+", ";r=r.slice(0,-2)}else r=arguments[s];i.push(r)}b(t+"\nArguments: "+Array.prototype.slice.call(i).join("")+"\n"+(new Error).stack),o=!1}return e.apply(this,arguments)},e)}function S(t,e){null!=n.deprecationHandler&&n.deprecationHandler(t,e),wo[t]||(b(e),wo[t]=!0)}function M(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function A(t){var e,n;for(n in t)e=t[n],M(e)?this[n]=e:this["_"+n]=e;this._config=t,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function C(t,e){var n,o=c({},t);for(n in e)l(e,n)&&(i(t[n])&&i(e[n])?(o[n]={},c(o[n],t[n]),c(o[n],e[n])):null!=e[n]?o[n]=e[n]:delete o[n]);for(n in t)l(t,n)&&!l(e,n)&&i(t[n])&&(o[n]=c({},o[n]));return o}function D(t){null!=t&&this.set(t)}function P(t,e,n){var o=this._calendar[t]||this._calendar.sameElse;return M(o)?o.call(e,n):o}function B(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function O(){return this._invalidDate}function L(t){return this._ordinal.replace("%d",t)}function E(t,e,n,o){var r=this._relativeTime[n];return M(r)?r(t,e,n,o):r.replace(/%d/i,t)}function I(t,e){var n=this._relativeTime[t>0?"future":"past"];return M(n)?n(e):n.replace(/%s/i,e)}function R(t,e){var n=t.toLowerCase();Do[n]=Do[n+"s"]=Do[e]=t}function Y(t){return"string"==typeof t?Do[t]||Do[t.toLowerCase()]:void 0}function N(t){var e,n,o={};for(n in t)l(t,n)&&(e=Y(n),e&&(o[e]=t[n]));return o}function j(t,e){Po[t]=e}function H(t){var e=[];for(var n in t)e.push({unit:n,priority:Po[n]});return e.sort(function(t,e){return t.priority-e.priority}),e}function U(t,e){return function(o){return null!=o?(W(this,t,o),n.updateOffset(this,e),this):F(this,t)}}function F(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function W(t,e,n){t.isValid()&&t._d["set"+(t._isUTC?"UTC":"")+e](n)}function V(t){return t=Y(t),M(this[t])?this[t]():this}function G(t,e){if("object"==typeof t){t=N(t);for(var n=H(t),o=0;o<n.length;o++)this[n[o].unit](t[n[o].unit])}else if(t=Y(t),M(this[t]))return this[t](e);return this}function q(t,e,n){var o=""+Math.abs(t),r=e-o.length,i=t>=0;return(i?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+o}function z(t,e,n,o){var r=o;"string"==typeof o&&(r=function(){return this[o]()}),t&&(Eo[t]=r),e&&(Eo[e[0]]=function(){return q(r.apply(this,arguments),e[1],e[2])}),n&&(Eo[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function $(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function J(t){var e,n,o=t.match(Bo);for(e=0,n=o.length;e<n;e++)Eo[o[e]]?o[e]=Eo[o[e]]:o[e]=$(o[e]);return function(e){var r,i="";for(r=0;r<n;r++)i+=o[r]instanceof Function?o[r].call(e,t):o[r];return i}}function Z(t,e){return t.isValid()?(e=K(e,t.localeData()),Lo[e]=Lo[e]||J(e),Lo[e](t)):t.localeData().invalidDate()}function K(t,e){function n(t){return e.longDateFormat(t)||t}var o=5;for(Oo.lastIndex=0;o>=0&&Oo.test(t);)t=t.replace(Oo,n),Oo.lastIndex=0,o-=1;return t}function Q(t,e,n){Qo[t]=M(e)?e:function(t,o){return t&&n?n:e}}function X(t,e){return l(Qo,t)?Qo[t](e._strict,e._locale):new RegExp(tt(t))}function tt(t){return et(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,o,r){return e||n||o||r}))}function et(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function nt(t,e){var n,o=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(o=function(t,n){n[e]=k(t)}),n=0;n<t.length;n++)Xo[t[n]]=o}function ot(t,e){nt(t,function(t,n,o,r){o._w=o._w||{},e(t,o._w,o,r)})}function rt(t,e,n){null!=e&&l(Xo,t)&&Xo[t](e,n._a,n,t)}function it(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function st(t,e){return t?r(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||lr).test(e)?"format":"standalone"][t.month()]:this._months}function at(t,e){return t?r(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[lr.test(e)?"format":"standalone"][t.month()]:this._monthsShort}function ut(t,e,n){var o,r,i,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],o=0;o<12;++o)i=d([2e3,o]),this._shortMonthsParse[o]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[o]=this.months(i,"").toLocaleLowerCase();return n?"MMM"===e?(r=xo.call(this._shortMonthsParse,s),r!==-1?r:null):(r=xo.call(this._longMonthsParse,s),r!==-1?r:null):"MMM"===e?(r=xo.call(this._shortMonthsParse,s),r!==-1?r:(r=xo.call(this._longMonthsParse,s),r!==-1?r:null)):(r=xo.call(this._longMonthsParse,s),r!==-1?r:(r=xo.call(this._shortMonthsParse,s),r!==-1?r:null))}function lt(t,e,n){var o,r,i;if(this._monthsParseExact)return ut.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),o=0;o<12;o++){if(r=d([2e3,o]),n&&!this._longMonthsParse[o]&&(this._longMonthsParse[o]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[o]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[o]||(i="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[o]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[o].test(t))return o;if(n&&"MMM"===e&&this._shortMonthsParse[o].test(t))return o;if(!n&&this._monthsParse[o].test(t))return o}}function ct(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=k(e);else if(e=t.localeData().monthsParse(e),"number"!=typeof e)return t;return n=Math.min(t.date(),it(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function dt(t){return null!=t?(ct(this,t),n.updateOffset(this,!0),this):F(this,"Month")}function pt(){return it(this.year(),this.month())}function ht(t){return this._monthsParseExact?(l(this,"_monthsRegex")||mt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=pr),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function ft(t){return this._monthsParseExact?(l(this,"_monthsRegex")||mt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=hr),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function mt(){function t(t,e){return e.length-t.length}var e,n,o=[],r=[],i=[];for(e=0;e<12;e++)n=d([2e3,e]),o.push(this.monthsShort(n,"")),r.push(this.months(n,"")),i.push(this.months(n,"")),i.push(this.monthsShort(n,""));for(o.sort(t),r.sort(t),i.sort(t),e=0;e<12;e++)o[e]=et(o[e]),r[e]=et(r[e]);for(e=0;e<24;e++)i[e]=et(i[e]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+o.join("|")+")","i")}function _t(t){return vt(t)?366:365}function vt(t){return t%4===0&&t%100!==0||t%400===0}function yt(){return vt(this.year())}function gt(t,e,n,o,r,i,s){var a=new Date(t,e,n,o,r,i,s);return t<100&&t>=0&&isFinite(a.getFullYear())&&a.setFullYear(t),a}function wt(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function kt(t,e,n){var o=7+e-n,r=(7+wt(t,0,o).getUTCDay()-e)%7;return-r+o-1}function xt(t,e,n,o,r){var i,s,a=(7+n-o)%7,u=kt(t,o,r),l=1+7*(e-1)+a+u;return l<=0?(i=t-1,s=_t(i)+l):l>_t(t)?(i=t+1,s=l-_t(t)):(i=t,s=l),{year:i,dayOfYear:s}}function bt(t,e,n){var o,r,i=kt(t.year(),e,n),s=Math.floor((t.dayOfYear()-i-1)/7)+1;return s<1?(r=t.year()-1,o=s+Tt(r,e,n)):s>Tt(t.year(),e,n)?(o=s-Tt(t.year(),e,n),r=t.year()+1):(r=t.year(),o=s),{week:o,year:r}}function Tt(t,e,n){var o=kt(t,e,n),r=kt(t+1,e,n);return(_t(t)-o+r)/7}function St(t){return bt(t,this._week.dow,this._week.doy).week}function Mt(){return this._week.dow}function At(){return this._week.doy}function Ct(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Dt(t){var e=bt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function Pt(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function Bt(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Ot(t,e){return t?r(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]:this._weekdays}function Lt(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Et(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin}function It(t,e,n){var o,r,i,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],o=0;o<7;++o)i=d([2e3,1]).day(o),this._minWeekdaysParse[o]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[o]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[o]=this.weekdays(i,"").toLocaleLowerCase();return n?"dddd"===e?(r=xo.call(this._weekdaysParse,s),r!==-1?r:null):"ddd"===e?(r=xo.call(this._shortWeekdaysParse,s),r!==-1?r:null):(r=xo.call(this._minWeekdaysParse,s),r!==-1?r:null):"dddd"===e?(r=xo.call(this._weekdaysParse,s),r!==-1?r:(r=xo.call(this._shortWeekdaysParse,s),r!==-1?r:(r=xo.call(this._minWeekdaysParse,s),r!==-1?r:null))):"ddd"===e?(r=xo.call(this._shortWeekdaysParse,s),r!==-1?r:(r=xo.call(this._weekdaysParse,s),r!==-1?r:(r=xo.call(this._minWeekdaysParse,s),r!==-1?r:null))):(r=xo.call(this._minWeekdaysParse,s),r!==-1?r:(r=xo.call(this._weekdaysParse,s),r!==-1?r:(r=xo.call(this._shortWeekdaysParse,s),r!==-1?r:null)))}function Rt(t,e,n){var o,r,i;if(this._weekdaysParseExact)return It.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),o=0;o<7;o++){if(r=d([2e3,1]).day(o),n&&!this._fullWeekdaysParse[o]&&(this._fullWeekdaysParse[o]=new RegExp("^"+this.weekdays(r,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[o]=new RegExp("^"+this.weekdaysShort(r,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[o]=new RegExp("^"+this.weekdaysMin(r,"").replace(".",".?")+"$","i")),this._weekdaysParse[o]||(i="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[o]=new RegExp(i.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[o].test(t))return o;if(n&&"ddd"===e&&this._shortWeekdaysParse[o].test(t))return o;if(n&&"dd"===e&&this._minWeekdaysParse[o].test(t))return o;if(!n&&this._weekdaysParse[o].test(t))return o}}function Yt(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Pt(t,this.localeData()),this.add(t-e,"d")):e}function Nt(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function jt(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=Bt(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function Ht(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Wt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=gr),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ut(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Wt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=wr),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Ft(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Wt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=kr),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Wt(){function t(t,e){return e.length-t.length}var e,n,o,r,i,s=[],a=[],u=[],l=[];for(e=0;e<7;e++)n=d([2e3,1]).day(e),o=this.weekdaysMin(n,""),r=this.weekdaysShort(n,""),i=this.weekdays(n,""),s.push(o),a.push(r),u.push(i),l.push(o),l.push(r),l.push(i);for(s.sort(t),a.sort(t),u.sort(t),l.sort(t),e=0;e<7;e++)a[e]=et(a[e]),u[e]=et(u[e]),l[e]=et(l[e]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Vt(){return this.hours()%12||12}function Gt(){return this.hours()||24}function qt(t,e){z(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function zt(t,e){return e._meridiemParse}function $t(t){return"p"===(t+"").toLowerCase().charAt(0)}function Jt(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}function Zt(t){return t?t.toLowerCase().replace("_","-"):t}function Kt(t){for(var e,n,o,r,i=0;i<t.length;){for(r=Zt(t[i]).split("-"),e=r.length,n=Zt(t[i+1]),n=n?n.split("-"):null;e>0;){if(o=Qt(r.slice(0,e).join("-")))return o;if(n&&n.length>=e&&x(r,n,!0)>=e-1)break;e--}i++}return null}function Qt(n){var o=null;if(!Mr[n]&&"undefined"!=typeof e&&e&&e.exports)try{o=xr._abbr,t("./locale/"+n),Xt(o)}catch(r){}return Mr[n]}function Xt(t,e){var n;return t&&(n=_(e)?ne(t):te(t,e),n&&(xr=n)),xr._abbr}function te(t,e){if(null!==e){var n=Sr;return e.abbr=t,null!=Mr[t]?(S("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Mr[t]._config):null!=e.parentLocale&&(null!=Mr[e.parentLocale]?n=Mr[e.parentLocale]._config:S("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/")),Mr[t]=new D(C(n,e)),Xt(t),Mr[t]}return delete Mr[t],null}function ee(t,e){if(null!=e){var n,o=Sr;null!=Mr[t]&&(o=Mr[t]._config),e=C(o,e),n=new D(e),n.parentLocale=Mr[t],Mr[t]=n,Xt(t)}else null!=Mr[t]&&(null!=Mr[t].parentLocale?Mr[t]=Mr[t].parentLocale:null!=Mr[t]&&delete Mr[t]);return Mr[t]}function ne(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return xr;if(!r(t)){if(e=Qt(t))return e;t=[t]}return Kt(t)}function oe(){return ko(Mr)}function re(t){var e,n=t._a;return n&&h(t).overflow===-2&&(e=n[er]<0||n[er]>11?er:n[nr]<1||n[nr]>it(n[tr],n[er])?nr:n[or]<0||n[or]>24||24===n[or]&&(0!==n[rr]||0!==n[ir]||0!==n[sr])?or:n[rr]<0||n[rr]>59?rr:n[ir]<0||n[ir]>59?ir:n[sr]<0||n[sr]>999?sr:-1,h(t)._overflowDayOfYear&&(e<tr||e>nr)&&(e=nr),h(t)._overflowWeeks&&e===-1&&(e=ar),h(t)._overflowWeekday&&e===-1&&(e=ur),h(t).overflow=e),t}function ie(t){var e,n,o,r,i,s,a=t._i,u=Ar.exec(a)||Cr.exec(a);if(u){for(h(t).iso=!0,e=0,n=Pr.length;e<n;e++)if(Pr[e][1].exec(u[1])){r=Pr[e][0],o=Pr[e][2]!==!1;break}if(null==r)return void(t._isValid=!1);if(u[3]){for(e=0,n=Br.length;e<n;e++)if(Br[e][1].exec(u[3])){i=(u[2]||" ")+Br[e][0];break}if(null==i)return void(t._isValid=!1)}if(!o&&null!=i)return void(t._isValid=!1);if(u[4]){if(!Dr.exec(u[4]))return void(t._isValid=!1);s="Z"}t._f=r+(i||"")+(s||""),de(t)}else t._isValid=!1}function se(t){var e=Or.exec(t._i);return null!==e?void(t._d=new Date((+e[1]))):(ie(t),void(t._isValid===!1&&(delete t._isValid,n.createFromInputFallback(t))))}function ae(t,e,n){return null!=t?t:null!=e?e:n}function ue(t){var e=new Date(n.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function le(t){var e,n,o,r,i=[];if(!t._d){for(o=ue(t),t._w&&null==t._a[nr]&&null==t._a[er]&&ce(t),t._dayOfYear&&(r=ae(t._a[tr],o[tr]),t._dayOfYear>_t(r)&&(h(t)._overflowDayOfYear=!0),n=wt(r,0,t._dayOfYear),t._a[er]=n.getUTCMonth(),t._a[nr]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=i[e]=o[e];for(;e<7;e++)t._a[e]=i[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[or]&&0===t._a[rr]&&0===t._a[ir]&&0===t._a[sr]&&(t._nextDay=!0,t._a[or]=0),t._d=(t._useUTC?wt:gt).apply(null,i),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[or]=24)}}function ce(t){var e,n,o,r,i,s,a,u;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(i=1,s=4,n=ae(e.GG,t._a[tr],bt(ge(),1,4).year),o=ae(e.W,1),r=ae(e.E,1),(r<1||r>7)&&(u=!0)):(i=t._locale._week.dow,s=t._locale._week.doy,n=ae(e.gg,t._a[tr],bt(ge(),i,s).year),o=ae(e.w,1),null!=e.d?(r=e.d,(r<0||r>6)&&(u=!0)):null!=e.e?(r=e.e+i,(e.e<0||e.e>6)&&(u=!0)):r=i),o<1||o>Tt(n,i,s)?h(t)._overflowWeeks=!0:null!=u?h(t)._overflowWeekday=!0:(a=xt(n,o,r,i,s),t._a[tr]=a.year,t._dayOfYear=a.dayOfYear)}function de(t){if(t._f===n.ISO_8601)return void ie(t);t._a=[],h(t).empty=!0;var e,o,r,i,s,a=""+t._i,u=a.length,l=0;for(r=K(t._f,t._locale).match(Bo)||[],e=0;e<r.length;e++)i=r[e],o=(a.match(X(i,t))||[])[0],o&&(s=a.substr(0,a.indexOf(o)),s.length>0&&h(t).unusedInput.push(s),a=a.slice(a.indexOf(o)+o.length),l+=o.length),Eo[i]?(o?h(t).empty=!1:h(t).unusedTokens.push(i),rt(i,o,t)):t._strict&&!o&&h(t).unusedTokens.push(i);h(t).charsLeftOver=u-l,a.length>0&&h(t).unusedInput.push(a),t._a[or]<=12&&h(t).bigHour===!0&&t._a[or]>0&&(h(t).bigHour=void 0),h(t).parsedDateParts=t._a.slice(0),h(t).meridiem=t._meridiem,t._a[or]=pe(t._locale,t._a[or],t._meridiem),le(t),re(t)}function pe(t,e,n){var o;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?(o=t.isPM(n),o&&e<12&&(e+=12),o||12!==e||(e=0),e):e}function he(t){var e,n,o,r,i;if(0===t._f.length)return h(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)i=0,e=v({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],de(e),f(e)&&(i+=h(e).charsLeftOver,i+=10*h(e).unusedTokens.length,h(e).score=i,(null==o||i<o)&&(o=i,n=e));c(t,n||e)}function fe(t){if(!t._d){var e=N(t._i);t._a=u([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),le(t)}}function me(t){var e=new y(re(_e(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function _e(t){var e=t._i,n=t._f;return t._locale=t._locale||ne(t._l),null===e||void 0===n&&""===e?m({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),g(e)?new y(re(e)):(r(n)?he(t):a(e)?t._d=e:n?de(t):ve(t),f(t)||(t._d=null),t))}function ve(t){var e=t._i;void 0===e?t._d=new Date(n.now()):a(e)?t._d=new Date(e.valueOf()):"string"==typeof e?se(t):r(e)?(t._a=u(e.slice(0),function(t){return parseInt(t,10)}),le(t)):"object"==typeof e?fe(t):"number"==typeof e?t._d=new Date(e):n.createFromInputFallback(t)}function ye(t,e,n,o,a){var u={};return"boolean"==typeof n&&(o=n,n=void 0),(i(t)&&s(t)||r(t)&&0===t.length)&&(t=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=a,u._l=n,u._i=t,u._f=e,u._strict=o,me(u)}function ge(t,e,n,o){return ye(t,e,n,o,!1)}function we(t,e){var n,o;if(1===e.length&&r(e[0])&&(e=e[0]),!e.length)return ge();for(n=e[0],o=1;o<e.length;++o)e[o].isValid()&&!e[o][t](n)||(n=e[o]);return n}function ke(){var t=[].slice.call(arguments,0);return we("isBefore",t)}function xe(){var t=[].slice.call(arguments,0);return we("isAfter",t)}function be(t){var e=N(t),n=e.year||0,o=e.quarter||0,r=e.month||0,i=e.week||0,s=e.day||0,a=e.hour||0,u=e.minute||0,l=e.second||0,c=e.millisecond||0;this._milliseconds=+c+1e3*l+6e4*u+1e3*a*60*60,this._days=+s+7*i,this._months=+r+3*o+12*n,this._data={},this._locale=ne(),this._bubble()}function Te(t){return t instanceof be}function Se(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function Me(t,e){z(t,0,0,function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+q(~~(t/60),2)+e+q(~~t%60,2)})}function Ae(t,e){var n=(e||"").match(t)||[],o=n[n.length-1]||[],r=(o+"").match(Rr)||["-",0,0],i=+(60*r[1])+k(r[2]);return"+"===r[0]?i:-i}function Ce(t,e){var o,r;return e._isUTC?(o=e.clone(),r=(g(t)||a(t)?t.valueOf():ge(t).valueOf())-o.valueOf(),o._d.setTime(o._d.valueOf()+r),n.updateOffset(o,!1),o):ge(t).local()}function De(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Pe(t,e){var o,r=this._offset||0;return this.isValid()?null!=t?("string"==typeof t?t=Ae(Jo,t):Math.abs(t)<16&&(t=60*t),!this._isUTC&&e&&(o=De(this)),this._offset=t,this._isUTC=!0,null!=o&&this.add(o,"m"),r!==t&&(!e||this._changeInProgress?qe(this,Ue(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:De(this):null!=t?this:NaN;
}function Be(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Oe(t){return this.utcOffset(0,t)}function Le(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(De(this),"m")),this}function Ee(){if(this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){var t=Ae($o,this._i);0===t?this.utcOffset(0,!0):this.utcOffset(Ae($o,this._i))}return this}function Ie(t){return!!this.isValid()&&(t=t?ge(t).utcOffset():0,(this.utcOffset()-t)%60===0)}function Re(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ye(){if(!_(this._isDSTShifted))return this._isDSTShifted;var t={};if(v(t,this),t=_e(t),t._a){var e=t._isUTC?d(t._a):ge(t._a);this._isDSTShifted=this.isValid()&&x(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Ne(){return!!this.isValid()&&!this._isUTC}function je(){return!!this.isValid()&&this._isUTC}function He(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Ue(t,e){var n,o,r,i=t,s=null;return Te(t)?i={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(i={},e?i[e]=t:i.milliseconds=t):(s=Yr.exec(t))?(n="-"===s[1]?-1:1,i={y:0,d:k(s[nr])*n,h:k(s[or])*n,m:k(s[rr])*n,s:k(s[ir])*n,ms:k(Se(1e3*s[sr]))*n}):(s=Nr.exec(t))?(n="-"===s[1]?-1:1,i={y:Fe(s[2],n),M:Fe(s[3],n),w:Fe(s[4],n),d:Fe(s[5],n),h:Fe(s[6],n),m:Fe(s[7],n),s:Fe(s[8],n)}):null==i?i={}:"object"==typeof i&&("from"in i||"to"in i)&&(r=Ve(ge(i.from),ge(i.to)),i={},i.ms=r.milliseconds,i.M=r.months),o=new be(i),Te(t)&&l(t,"_locale")&&(o._locale=t._locale),o}function Fe(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function We(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Ve(t,e){var n;return t.isValid()&&e.isValid()?(e=Ce(e,t),t.isBefore(e)?n=We(t,e):(n=We(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Ge(t,e){return function(n,o){var r,i;return null===o||isNaN(+o)||(S(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=o,o=i),n="string"==typeof n?+n:n,r=Ue(n,o),qe(this,r,t),this}}function qe(t,e,o,r){var i=e._milliseconds,s=Se(e._days),a=Se(e._months);t.isValid()&&(r=null==r||r,i&&t._d.setTime(t._d.valueOf()+i*o),s&&W(t,"Date",F(t,"Date")+s*o),a&&ct(t,F(t,"Month")+a*o),r&&n.updateOffset(t,s||a))}function ze(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function $e(t,e){var o=t||ge(),r=Ce(o,this).startOf("day"),i=n.calendarFormat(this,r)||"sameElse",s=e&&(M(e[i])?e[i].call(this,o):e[i]);return this.format(s||this.localeData().calendar(i,this,ge(o)))}function Je(){return new y(this)}function Ze(t,e){var n=g(t)?t:ge(t);return!(!this.isValid()||!n.isValid())&&(e=Y(_(e)?"millisecond":e),"millisecond"===e?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())}function Ke(t,e){var n=g(t)?t:ge(t);return!(!this.isValid()||!n.isValid())&&(e=Y(_(e)?"millisecond":e),"millisecond"===e?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())}function Qe(t,e,n,o){return o=o||"()",("("===o[0]?this.isAfter(t,n):!this.isBefore(t,n))&&(")"===o[1]?this.isBefore(e,n):!this.isAfter(e,n))}function Xe(t,e){var n,o=g(t)?t:ge(t);return!(!this.isValid()||!o.isValid())&&(e=Y(e||"millisecond"),"millisecond"===e?this.valueOf()===o.valueOf():(n=o.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))}function tn(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function en(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function nn(t,e,n){var o,r,i,s;return this.isValid()?(o=Ce(t,this),o.isValid()?(r=6e4*(o.utcOffset()-this.utcOffset()),e=Y(e),"year"===e||"month"===e||"quarter"===e?(s=on(this,o),"quarter"===e?s/=3:"year"===e&&(s/=12)):(i=this-o,s="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-r)/864e5:"week"===e?(i-r)/6048e5:i),n?s:w(s)):NaN):NaN}function on(t,e){var n,o,r=12*(e.year()-t.year())+(e.month()-t.month()),i=t.clone().add(r,"months");return e-i<0?(n=t.clone().add(r-1,"months"),o=(e-i)/(i-n)):(n=t.clone().add(r+1,"months"),o=(e-i)/(n-i)),-(r+o)||0}function rn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function sn(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?M(Date.prototype.toISOString)?this.toDate().toISOString():Z(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Z(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function an(t){t||(t=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var e=Z(this,t);return this.localeData().postformat(e)}function un(t,e){return this.isValid()&&(g(t)&&t.isValid()||ge(t).isValid())?Ue({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ln(t){return this.from(ge(),t)}function cn(t,e){return this.isValid()&&(g(t)&&t.isValid()||ge(t).isValid())?Ue({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function dn(t){return this.to(ge(),t)}function pn(t){var e;return void 0===t?this._locale._abbr:(e=ne(t),null!=e&&(this._locale=e),this)}function hn(){return this._locale}function fn(t){switch(t=Y(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function mn(t){return t=Y(t),void 0===t||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))}function _n(){return this._d.valueOf()-6e4*(this._offset||0)}function vn(){return Math.floor(this.valueOf()/1e3)}function yn(){return new Date(this.valueOf())}function gn(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function wn(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function kn(){return this.isValid()?this.toISOString():null}function xn(){return f(this)}function bn(){return c({},h(this))}function Tn(){return h(this).overflow}function Sn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Mn(t,e){z(0,[t,t.length],0,e)}function An(t){return Bn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Cn(t){return Bn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Dn(){return Tt(this.year(),1,4)}function Pn(){var t=this.localeData()._week;return Tt(this.year(),t.dow,t.doy)}function Bn(t,e,n,o,r){var i;return null==t?bt(this,o,r).year:(i=Tt(t,o,r),e>i&&(e=i),On.call(this,t,e,n,o,r))}function On(t,e,n,o,r){var i=xt(t,e,n,o,r),s=wt(i.year,0,i.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function Ln(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function En(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function In(t,e){e[sr]=k(1e3*("0."+t))}function Rn(){return this._isUTC?"UTC":""}function Yn(){return this._isUTC?"Coordinated Universal Time":""}function Nn(t){return ge(1e3*t)}function jn(){return ge.apply(null,arguments).parseZone()}function Hn(t){return t}function Un(t,e,n,o){var r=ne(),i=d().set(o,e);return r[n](i,t)}function Fn(t,e,n){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return Un(t,e,n,"month");var o,r=[];for(o=0;o<12;o++)r[o]=Un(t,o,n,"month");return r}function Wn(t,e,n,o){"boolean"==typeof t?("number"==typeof e&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,"number"==typeof e&&(n=e,e=void 0),e=e||"");var r=ne(),i=t?r._week.dow:0;if(null!=n)return Un(e,(n+i)%7,o,"day");var s,a=[];for(s=0;s<7;s++)a[s]=Un(e,(s+i)%7,o,"day");return a}function Vn(t,e){return Fn(t,e,"months")}function Gn(t,e){return Fn(t,e,"monthsShort")}function qn(t,e,n){return Wn(t,e,n,"weekdays")}function zn(t,e,n){return Wn(t,e,n,"weekdaysShort")}function $n(t,e,n){return Wn(t,e,n,"weekdaysMin")}function Jn(){var t=this._data;return this._milliseconds=Zr(this._milliseconds),this._days=Zr(this._days),this._months=Zr(this._months),t.milliseconds=Zr(t.milliseconds),t.seconds=Zr(t.seconds),t.minutes=Zr(t.minutes),t.hours=Zr(t.hours),t.months=Zr(t.months),t.years=Zr(t.years),this}function Zn(t,e,n,o){var r=Ue(e,n);return t._milliseconds+=o*r._milliseconds,t._days+=o*r._days,t._months+=o*r._months,t._bubble()}function Kn(t,e){return Zn(this,t,e,1)}function Qn(t,e){return Zn(this,t,e,-1)}function Xn(t){return t<0?Math.floor(t):Math.ceil(t)}function to(){var t,e,n,o,r,i=this._milliseconds,s=this._days,a=this._months,u=this._data;return i>=0&&s>=0&&a>=0||i<=0&&s<=0&&a<=0||(i+=864e5*Xn(no(a)+s),s=0,a=0),u.milliseconds=i%1e3,t=w(i/1e3),u.seconds=t%60,e=w(t/60),u.minutes=e%60,n=w(e/60),u.hours=n%24,s+=w(n/24),r=w(eo(s)),a+=r,s-=Xn(no(r)),o=w(a/12),a%=12,u.days=s,u.months=a,u.years=o,this}function eo(t){return 4800*t/146097}function no(t){return 146097*t/4800}function oo(t){var e,n,o=this._milliseconds;if(t=Y(t),"month"===t||"year"===t)return e=this._days+o/864e5,n=this._months+eo(e),"month"===t?n:n/12;switch(e=this._days+Math.round(no(this._months)),t){case"week":return e/7+o/6048e5;case"day":return e+o/864e5;case"hour":return 24*e+o/36e5;case"minute":return 1440*e+o/6e4;case"second":return 86400*e+o/1e3;case"millisecond":return Math.floor(864e5*e)+o;default:throw new Error("Unknown unit "+t)}}function ro(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*k(this._months/12)}function io(t){return function(){return this.as(t)}}function so(t){return t=Y(t),this[t+"s"]()}function ao(t){return function(){return this._data[t]}}function uo(){return w(this.days()/7)}function lo(t,e,n,o,r){return r.relativeTime(e||1,!!n,t,o)}function co(t,e,n){var o=Ue(t).abs(),r=pi(o.as("s")),i=pi(o.as("m")),s=pi(o.as("h")),a=pi(o.as("d")),u=pi(o.as("M")),l=pi(o.as("y")),c=r<hi.s&&["s",r]||i<=1&&["m"]||i<hi.m&&["mm",i]||s<=1&&["h"]||s<hi.h&&["hh",s]||a<=1&&["d"]||a<hi.d&&["dd",a]||u<=1&&["M"]||u<hi.M&&["MM",u]||l<=1&&["y"]||["yy",l];return c[2]=e,c[3]=+t>0,c[4]=n,lo.apply(null,c)}function po(t){return void 0===t?pi:"function"==typeof t&&(pi=t,!0)}function ho(t,e){return void 0!==hi[t]&&(void 0===e?hi[t]:(hi[t]=e,!0))}function fo(t){var e=this.localeData(),n=co(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)}function mo(){var t,e,n,o=fi(this._milliseconds)/1e3,r=fi(this._days),i=fi(this._months);t=w(o/60),e=w(t/60),o%=60,t%=60,n=w(i/12),i%=12;var s=n,a=i,u=r,l=e,c=t,d=o,p=this.asSeconds();return p?(p<0?"-":"")+"P"+(s?s+"Y":"")+(a?a+"M":"")+(u?u+"D":"")+(l||c||d?"T":"")+(l?l+"H":"")+(c?c+"M":"")+(d?d+"S":""):"P0D"}var _o,vo;vo=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),n=e.length>>>0,o=0;o<n;o++)if(o in e&&t.call(this,e[o],o,e))return!0;return!1};var yo=n.momentProperties=[],go=!1,wo={};n.suppressDeprecationWarnings=!1,n.deprecationHandler=null;var ko;ko=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)l(t,e)&&n.push(e);return n};var xo,bo={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},To={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},So="Invalid date",Mo="%d",Ao=/\d{1,2}/,Co={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Do={},Po={},Bo=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Oo=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Lo={},Eo={},Io=/\d/,Ro=/\d\d/,Yo=/\d{3}/,No=/\d{4}/,jo=/[+-]?\d{6}/,Ho=/\d\d?/,Uo=/\d\d\d\d?/,Fo=/\d\d\d\d\d\d?/,Wo=/\d{1,3}/,Vo=/\d{1,4}/,Go=/[+-]?\d{1,6}/,qo=/\d+/,zo=/[+-]?\d+/,$o=/Z|[+-]\d\d:?\d\d/gi,Jo=/Z|[+-]\d\d(?::?\d\d)?/gi,Zo=/[+-]?\d+(\.\d{1,3})?/,Ko=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Qo={},Xo={},tr=0,er=1,nr=2,or=3,rr=4,ir=5,sr=6,ar=7,ur=8;xo=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},z("M",["MM",2],"Mo",function(){return this.month()+1}),z("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),z("MMMM",0,0,function(t){return this.localeData().months(this,t)}),R("month","M"),j("month",8),Q("M",Ho),Q("MM",Ho,Ro),Q("MMM",function(t,e){return e.monthsShortRegex(t)}),Q("MMMM",function(t,e){return e.monthsRegex(t)}),nt(["M","MM"],function(t,e){e[er]=k(t)-1}),nt(["MMM","MMMM"],function(t,e,n,o){var r=n._locale.monthsParse(t,o,n._strict);null!=r?e[er]=r:h(n).invalidMonth=t});var lr=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,cr="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),dr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),pr=Ko,hr=Ko;z("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),z(0,["YY",2],0,function(){return this.year()%100}),z(0,["YYYY",4],0,"year"),z(0,["YYYYY",5],0,"year"),z(0,["YYYYYY",6,!0],0,"year"),R("year","y"),j("year",1),Q("Y",zo),Q("YY",Ho,Ro),Q("YYYY",Vo,No),Q("YYYYY",Go,jo),Q("YYYYYY",Go,jo),nt(["YYYYY","YYYYYY"],tr),nt("YYYY",function(t,e){e[tr]=2===t.length?n.parseTwoDigitYear(t):k(t)}),nt("YY",function(t,e){e[tr]=n.parseTwoDigitYear(t)}),nt("Y",function(t,e){e[tr]=parseInt(t,10)}),n.parseTwoDigitYear=function(t){return k(t)+(k(t)>68?1900:2e3)};var fr=U("FullYear",!0);z("w",["ww",2],"wo","week"),z("W",["WW",2],"Wo","isoWeek"),R("week","w"),R("isoWeek","W"),j("week",5),j("isoWeek",5),Q("w",Ho),Q("ww",Ho,Ro),Q("W",Ho),Q("WW",Ho,Ro),ot(["w","ww","W","WW"],function(t,e,n,o){e[o.substr(0,1)]=k(t)});var mr={dow:0,doy:6};z("d",0,"do","day"),z("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),z("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),z("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),z("e",0,0,"weekday"),z("E",0,0,"isoWeekday"),R("day","d"),R("weekday","e"),R("isoWeekday","E"),j("day",11),j("weekday",11),j("isoWeekday",11),Q("d",Ho),Q("e",Ho),Q("E",Ho),Q("dd",function(t,e){return e.weekdaysMinRegex(t)}),Q("ddd",function(t,e){return e.weekdaysShortRegex(t)}),Q("dddd",function(t,e){return e.weekdaysRegex(t)}),ot(["dd","ddd","dddd"],function(t,e,n,o){var r=n._locale.weekdaysParse(t,o,n._strict);null!=r?e.d=r:h(n).invalidWeekday=t}),ot(["d","e","E"],function(t,e,n,o){e[o]=k(t)});var _r="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),vr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),yr="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),gr=Ko,wr=Ko,kr=Ko;z("H",["HH",2],0,"hour"),z("h",["hh",2],0,Vt),z("k",["kk",2],0,Gt),z("hmm",0,0,function(){return""+Vt.apply(this)+q(this.minutes(),2)}),z("hmmss",0,0,function(){return""+Vt.apply(this)+q(this.minutes(),2)+q(this.seconds(),2)}),z("Hmm",0,0,function(){return""+this.hours()+q(this.minutes(),2)}),z("Hmmss",0,0,function(){return""+this.hours()+q(this.minutes(),2)+q(this.seconds(),2)}),qt("a",!0),qt("A",!1),R("hour","h"),j("hour",13),Q("a",zt),Q("A",zt),Q("H",Ho),Q("h",Ho),Q("HH",Ho,Ro),Q("hh",Ho,Ro),Q("hmm",Uo),Q("hmmss",Fo),Q("Hmm",Uo),Q("Hmmss",Fo),nt(["H","HH"],or),nt(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),nt(["h","hh"],function(t,e,n){e[or]=k(t),h(n).bigHour=!0}),nt("hmm",function(t,e,n){var o=t.length-2;e[or]=k(t.substr(0,o)),e[rr]=k(t.substr(o)),h(n).bigHour=!0}),nt("hmmss",function(t,e,n){var o=t.length-4,r=t.length-2;e[or]=k(t.substr(0,o)),e[rr]=k(t.substr(o,2)),e[ir]=k(t.substr(r)),h(n).bigHour=!0}),nt("Hmm",function(t,e,n){var o=t.length-2;e[or]=k(t.substr(0,o)),e[rr]=k(t.substr(o))}),nt("Hmmss",function(t,e,n){var o=t.length-4,r=t.length-2;e[or]=k(t.substr(0,o)),e[rr]=k(t.substr(o,2)),e[ir]=k(t.substr(r))});var xr,br=/[ap]\.?m?\.?/i,Tr=U("Hours",!0),Sr={calendar:bo,longDateFormat:To,invalidDate:So,ordinal:Mo,ordinalParse:Ao,relativeTime:Co,months:cr,monthsShort:dr,week:mr,weekdays:_r,weekdaysMin:yr,weekdaysShort:vr,meridiemParse:br},Mr={},Ar=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Cr=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Dr=/Z|[+-]\d\d(?::?\d\d)?/,Pr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Br=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Or=/^\/?Date\((\-?\d+)/i;n.createFromInputFallback=T("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),n.ISO_8601=function(){};var Lr=T("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ge.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:m()}),Er=T("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ge.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:m()}),Ir=function(){return Date.now?Date.now():+new Date};Me("Z",":"),Me("ZZ",""),Q("Z",Jo),Q("ZZ",Jo),nt(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Ae(Jo,t)});var Rr=/([\+\-]|\d\d)/gi;n.updateOffset=function(){};var Yr=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Nr=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Ue.fn=be.prototype;var jr=Ge(1,"add"),Hr=Ge(-1,"subtract");n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ur=T("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});z(0,["gg",2],0,function(){return this.weekYear()%100}),z(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Mn("gggg","weekYear"),Mn("ggggg","weekYear"),Mn("GGGG","isoWeekYear"),Mn("GGGGG","isoWeekYear"),R("weekYear","gg"),R("isoWeekYear","GG"),j("weekYear",1),j("isoWeekYear",1),Q("G",zo),Q("g",zo),Q("GG",Ho,Ro),Q("gg",Ho,Ro),Q("GGGG",Vo,No),Q("gggg",Vo,No),Q("GGGGG",Go,jo),Q("ggggg",Go,jo),ot(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,o){e[o.substr(0,2)]=k(t)}),ot(["gg","GG"],function(t,e,o,r){e[r]=n.parseTwoDigitYear(t)}),z("Q",0,"Qo","quarter"),R("quarter","Q"),j("quarter",7),Q("Q",Io),nt("Q",function(t,e){e[er]=3*(k(t)-1)}),z("D",["DD",2],"Do","date"),R("date","D"),j("date",9),Q("D",Ho),Q("DD",Ho,Ro),Q("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),nt(["D","DD"],nr),nt("Do",function(t,e){e[nr]=k(t.match(Ho)[0],10)});var Fr=U("Date",!0);z("DDD",["DDDD",3],"DDDo","dayOfYear"),R("dayOfYear","DDD"),j("dayOfYear",4),Q("DDD",Wo),Q("DDDD",Yo),nt(["DDD","DDDD"],function(t,e,n){n._dayOfYear=k(t)}),z("m",["mm",2],0,"minute"),R("minute","m"),j("minute",14),Q("m",Ho),Q("mm",Ho,Ro),nt(["m","mm"],rr);var Wr=U("Minutes",!1);z("s",["ss",2],0,"second"),R("second","s"),j("second",15),Q("s",Ho),Q("ss",Ho,Ro),nt(["s","ss"],ir);var Vr=U("Seconds",!1);z("S",0,0,function(){return~~(this.millisecond()/100)}),z(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),z(0,["SSS",3],0,"millisecond"),z(0,["SSSS",4],0,function(){return 10*this.millisecond()}),z(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),z(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),z(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),z(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),z(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),R("millisecond","ms"),j("millisecond",16),Q("S",Wo,Io),Q("SS",Wo,Ro),Q("SSS",Wo,Yo);var Gr;for(Gr="SSSS";Gr.length<=9;Gr+="S")Q(Gr,qo);for(Gr="S";Gr.length<=9;Gr+="S")nt(Gr,In);var qr=U("Milliseconds",!1);z("z",0,0,"zoneAbbr"),z("zz",0,0,"zoneName");var zr=y.prototype;zr.add=jr,zr.calendar=$e,zr.clone=Je,zr.diff=nn,zr.endOf=mn,zr.format=an,zr.from=un,zr.fromNow=ln,zr.to=cn,zr.toNow=dn,zr.get=V,zr.invalidAt=Tn,zr.isAfter=Ze,zr.isBefore=Ke,zr.isBetween=Qe,zr.isSame=Xe,zr.isSameOrAfter=tn,zr.isSameOrBefore=en,zr.isValid=xn,zr.lang=Ur,zr.locale=pn,zr.localeData=hn,zr.max=Er,zr.min=Lr,zr.parsingFlags=bn,zr.set=G,zr.startOf=fn,zr.subtract=Hr,zr.toArray=gn,zr.toObject=wn,zr.toDate=yn,zr.toISOString=sn,zr.toJSON=kn,zr.toString=rn,zr.unix=vn,zr.valueOf=_n,zr.creationData=Sn,zr.year=fr,zr.isLeapYear=yt,zr.weekYear=An,zr.isoWeekYear=Cn,zr.quarter=zr.quarters=Ln,zr.month=dt,zr.daysInMonth=pt,zr.week=zr.weeks=Ct,zr.isoWeek=zr.isoWeeks=Dt,zr.weeksInYear=Pn,zr.isoWeeksInYear=Dn,zr.date=Fr,zr.day=zr.days=Yt,zr.weekday=Nt,zr.isoWeekday=jt,zr.dayOfYear=En,zr.hour=zr.hours=Tr,zr.minute=zr.minutes=Wr,zr.second=zr.seconds=Vr,zr.millisecond=zr.milliseconds=qr,zr.utcOffset=Pe,zr.utc=Oe,zr.local=Le,zr.parseZone=Ee,zr.hasAlignedHourOffset=Ie,zr.isDST=Re,zr.isLocal=Ne,zr.isUtcOffset=je,zr.isUtc=He,zr.isUTC=He,zr.zoneAbbr=Rn,zr.zoneName=Yn,zr.dates=T("dates accessor is deprecated. Use date instead.",Fr),zr.months=T("months accessor is deprecated. Use month instead",dt),zr.years=T("years accessor is deprecated. Use year instead",fr),zr.zone=T("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Be),zr.isDSTShifted=T("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ye);var $r=zr,Jr=D.prototype;Jr.calendar=P,Jr.longDateFormat=B,Jr.invalidDate=O,Jr.ordinal=L,Jr.preparse=Hn,Jr.postformat=Hn,Jr.relativeTime=E,Jr.pastFuture=I,Jr.set=A,Jr.months=st,Jr.monthsShort=at,Jr.monthsParse=lt,Jr.monthsRegex=ft,Jr.monthsShortRegex=ht,Jr.week=St,Jr.firstDayOfYear=At,Jr.firstDayOfWeek=Mt,Jr.weekdays=Ot,Jr.weekdaysMin=Et,Jr.weekdaysShort=Lt,Jr.weekdaysParse=Rt,Jr.weekdaysRegex=Ht,Jr.weekdaysShortRegex=Ut,Jr.weekdaysMinRegex=Ft,Jr.isPM=$t,Jr.meridiem=Jt,Xt("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=1===k(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),n.lang=T("moment.lang is deprecated. Use moment.locale instead.",Xt),n.langData=T("moment.langData is deprecated. Use moment.localeData instead.",ne);var Zr=Math.abs,Kr=io("ms"),Qr=io("s"),Xr=io("m"),ti=io("h"),ei=io("d"),ni=io("w"),oi=io("M"),ri=io("y"),ii=ao("milliseconds"),si=ao("seconds"),ai=ao("minutes"),ui=ao("hours"),li=ao("days"),ci=ao("months"),di=ao("years"),pi=Math.round,hi={s:45,m:45,h:22,d:26,M:11},fi=Math.abs,mi=be.prototype;mi.abs=Jn,mi.add=Kn,mi.subtract=Qn,mi.as=oo,mi.asMilliseconds=Kr,mi.asSeconds=Qr,mi.asMinutes=Xr,mi.asHours=ti,mi.asDays=ei,mi.asWeeks=ni,mi.asMonths=oi,mi.asYears=ri,mi.valueOf=ro,mi._bubble=to,mi.get=so,mi.milliseconds=ii,mi.seconds=si,mi.minutes=ai,mi.hours=ui,mi.days=li,mi.weeks=uo,mi.months=ci,mi.years=di,mi.humanize=fo,mi.toISOString=mo,mi.toString=mo,mi.toJSON=mo,mi.locale=pn,mi.localeData=hn,mi.toIsoString=T("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",mo),mi.lang=Ur,z("X",0,0,"unix"),z("x",0,0,"valueOf"),Q("x",zo),Q("X",Zo),nt("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),nt("x",function(t,e,n){n._d=new Date(k(t))}),n.version="2.15.1",o(ge),n.fn=$r,n.min=ke,n.max=xe,n.now=Ir,n.utc=d,n.unix=Nn,n.months=Vn,n.isDate=a,n.locale=Xt,n.invalid=m,n.duration=Ue,n.isMoment=g,n.weekdays=qn,n.parseZone=jn,n.localeData=ne,n.isDuration=Te,n.monthsShort=Gn,n.weekdaysMin=$n,n.defineLocale=te,n.updateLocale=ee,n.locales=oe,n.weekdaysShort=zn,n.normalizeUnits=Y,n.relativeTimeRounding=po,n.relativeTimeThreshold=ho,n.calendarFormat=ze,n.prototype=$r;var _i=n;return _i})},{}],79:[function(t,e,n){!function(t,n,o){function r(t,e,n){return t.addEventListener?void t.addEventListener(e,n,!1):void t.attachEvent("on"+e,n)}function i(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return y[t.which]?y[t.which]:g[t.which]?g[t.which]:String.fromCharCode(t.which).toLowerCase()}function s(t,e){return t.sort().join(",")===e.sort().join(",")}function a(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}function u(t){return t.preventDefault?void t.preventDefault():void(t.returnValue=!1)}function l(t){return t.stopPropagation?void t.stopPropagation():void(t.cancelBubble=!0)}function c(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function d(){if(!v){v={};for(var t in y)t>95&&t<112||y.hasOwnProperty(t)&&(v[y[t]]=t)}return v}function p(t,e,n){return n||(n=d()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function h(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus"),t.split("+"))}function f(t,e){var n,o,r,i=[];for(n=h(t),r=0;r<n.length;++r)o=n[r],k[o]&&(o=k[o]),e&&"keypress"!=e&&w[o]&&(o=w[o],i.push("shift")),c(o)&&i.push(o);return e=p(o,i,e),{key:o,modifiers:i,action:e}}function m(t,e){return null!==t&&t!==n&&(t===e||m(t.parentNode,e))}function _(t){function e(t){t=t||{};var e,n=!1;for(e in w)t[e]?n=!0:w[e]=0;n||(b=!1)}function o(t,e,n,o,r,i){var a,u,l=[],d=n.type;if(!y._callbacks[t])return[];for("keyup"==d&&c(t)&&(e=[t]),a=0;a<y._callbacks[t].length;++a)if(u=y._callbacks[t][a],(o||!u.seq||w[u.seq]==u.level)&&d==u.action&&("keypress"==d&&!n.metaKey&&!n.ctrlKey||s(e,u.modifiers))){var p=!o&&u.combo==r,h=o&&u.seq==o&&u.level==i;(p||h)&&y._callbacks[t].splice(a,1),l.push(u)}return l}function d(t,e,n,o){y.stopCallback(e,e.target||e.srcElement,n,o)||t(e,n)===!1&&(u(e),l(e))}function p(t){"number"!=typeof t.which&&(t.which=t.keyCode);var e=i(t);if(e)return"keyup"==t.type&&k===e?void(k=!1):void y.handleKey(e,a(t),t)}function h(){clearTimeout(g),g=setTimeout(e,1e3)}function m(t,n,o,r){function s(e){return function(){b=e,++w[t],h()}}function a(n){d(o,n,t),"keyup"!==r&&(k=i(n)),setTimeout(e,10)}w[t]=0;for(var u=0;u<n.length;++u){var l=u+1===n.length,c=l?a:s(r||f(n[u+1]).action);v(n[u],c,r,t,u)}}function v(t,e,n,r,i){y._directMap[t+":"+n]=e,t=t.replace(/\s+/g," ");var s,a=t.split(" ");return a.length>1?void m(t,a,e,n):(s=f(t,n),y._callbacks[s.key]=y._callbacks[s.key]||[],o(s.key,s.modifiers,{type:s.action},r,t,i),void y._callbacks[s.key][r?"unshift":"push"]({callback:e,modifiers:s.modifiers,action:s.action,seq:r,level:i,combo:t}))}var y=this;if(t=t||n,!(y instanceof _))return new _(t);y.target=t,y._callbacks={},y._directMap={};var g,w={},k=!1,x=!1,b=!1;y._handleKey=function(t,n,r){var i,s=o(t,n,r),a={},u=0,l=!1;for(i=0;i<s.length;++i)s[i].seq&&(u=Math.max(u,s[i].level));for(i=0;i<s.length;++i)if(s[i].seq){if(s[i].level!=u)continue;l=!0,a[s[i].seq]=1,d(s[i].callback,r,s[i].combo,s[i].seq)}else l||d(s[i].callback,r,s[i].combo);var p="keypress"==r.type&&x;r.type!=b||c(t)||p||e(a),x=l&&"keydown"==r.type},y._bindMultiple=function(t,e,n){for(var o=0;o<t.length;++o)v(t[o],e,n)},r(t,"keypress",p),r(t,"keydown",p),r(t,"keyup",p)}if(t){for(var v,y={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},g={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},w={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},k={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},x=1;x<20;++x)y[111+x]="f"+x;for(x=0;x<=9;++x)y[x+96]=x;_.prototype.bind=function(t,e,n){var o=this;return t=t instanceof Array?t:[t],o._bindMultiple.call(o,t,e,n),o},_.prototype.unbind=function(t,e){var n=this;return n.bind.call(n,t,function(){},e)},_.prototype.trigger=function(t,e){var n=this;return n._directMap[t+":"+e]&&n._directMap[t+":"+e]({},t),n},_.prototype.reset=function(){var t=this;return t._callbacks={},t._directMap={},t},_.prototype.stopCallback=function(t,e){var n=this;return!((" "+e.className+" ").indexOf(" mousetrap ")>-1)&&(!m(e,n.target)&&("INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable))},_.prototype.handleKey=function(){var t=this;return t._handleKey.apply(t,arguments)},_.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(y[e]=t[e]);v=null},_.init=function(){var t=_(n);for(var e in t)"_"!==e.charAt(0)&&(_[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},_.init(),t.Mousetrap=_,"undefined"!=typeof e&&e.exports&&(e.exports=_),"function"==typeof define&&define.amd&&define(function(){return _})}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},{}]},{},[1]);