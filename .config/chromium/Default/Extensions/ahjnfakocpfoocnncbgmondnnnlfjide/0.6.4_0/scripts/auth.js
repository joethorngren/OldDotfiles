!function t(e,n,o){function r(s,u){if(!n[s]){if(!e[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return r(n?n:t)},l,l.exports,t,e,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(t,e,n){"use strict";var o,r,i=function(t,e){return function(){return t.apply(e,arguments)}};r=t("utils/storage"),new(o=function(){function t(){this.onContentLoaded=i(this.onContentLoaded,this),this.params=this._decodeParams(),this._setTitle(),this._createWebView(),this._setUpListeners(),$("body").append(this.webview)}return t.prototype.onConsoleMessage=function(t){var e,n,o,i;if(o=t.originalEvent.message,console.log(o),null!=o&&o.indexOf("Pomello|")!==-1)return i=o.split("|"),n=i[0],e=i[1],r.set(JSON.parse(e)).then(window.close)},t.prototype.onContentLoaded=function(){if(this.loaded!==!0&&(this.loaded=!0,this.webview.addClass("loaded")),"true"===this.params.trelloAuth&&"https://trello.com/1/token/approve"===this.webview.attr("src"))return this.webview[0].executeScript({code:"console.log('Pomello|{\"trelloToken\":\"' + document.getElementsByTagName('pre')[0].textContent.trim() + '\"}')"})},t.prototype._setUpListeners=function(){return this.webview.on({consolemessage:this.onConsoleMessage,contentload:this.onContentLoaded})},t.prototype._decodeParams=function(){var t;return t=window.location.search.substring(1),_.object(t.split("&").map(function(t){var e,n,o;return n=t.split("="),e=n[0],o=n[1],[e,decodeURIComponent(o)]}))},t.prototype._createWebView=function(){var t;return t=$("<webview>"),t.attr("src",this.params.src),this.webview=t},t.prototype._setTitle=function(){if(null!=this.params.title)return document.title="Pomello - "+this.params.title},t}())},{"utils/storage":2}],2:[function(t,e,n){"use strict";var o;o=function(){function t(){}return t.prototype.get=function(t){return new Promise(function(e,n){var o;return o=t.split(","),chrome.storage.sync.get(o,function(n){return e(o.length>1?n:n[t])})})},t.prototype.set=function(t,e){return new Promise(function(n,o){var r;return null===e?n(chrome.storage.sync.remove(t)):("object"==typeof t?r=t:(r={},r[t]=e),chrome.storage.sync.set(r,function(){return n()}))})},t.prototype.remove=function(t){return this.set(t,null)},t}(),e.exports=new o},{}]},{},[1]);